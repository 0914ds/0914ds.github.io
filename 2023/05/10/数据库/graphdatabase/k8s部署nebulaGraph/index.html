<!DOCTYPE html>
<html lang="en">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="k8så®‰è£…éƒ¨ç½²nebulaGraph" />
    <meta name="hexo-theme-A4" content="v1.9.7" />
    <link rel="alternate icon" type="image/webp" href="../../../../../../img/favicon.webp">
    <title>blog</title>

    
        
<link rel="stylesheet" href="../../../../../../css/highlight/style1.css">

        
<link rel="stylesheet" href="../../../../../../css/reset.css">

        
<link rel="stylesheet" href="../../../../../../css/markdown.css">

        
<link rel="stylesheet" href="../../../../../../css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
        
        
<link rel="stylesheet" href="../../../../../../css/ui.css">
 
        
<link rel="stylesheet" href="../../../../../../css/style.css">


        
            <!--è¿”å›é¡¶éƒ¨css-->
            
<link rel="stylesheet" href="../../../../../../css/returnToTop.css">

            
<link rel="stylesheet" href="../../../../../../css/unicons.css">

        
        
            <!--ç›®å½•-->
            
<link rel="stylesheet" href="../../../../../../css/toc.css">

        
    

    
        
<link rel="stylesheet" href="../../../../../../css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="../../../../../../css/lightgallery-bundle.min.css">


   
        
<link rel="stylesheet" href="../../../../../../css/custom.css">

    

<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="atom.xml" title="blog" type="application/atom+xml">
</head>
    
    
        <style>
            .index-main{
                max-width:  880px;
            }
        </style>

    
    



    

    
    




    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #e4e4e4 ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: 'ğŸŒ“', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <style>
            .header-img {
                width: 56px;
                height: auto;
                object-fit: cover; /* ä¿æŒå›¾ç‰‡æ¯”ä¾‹ */
                transition: transform 0.3s ease-in-out; 
                border-radius: 0; 
            }
            
        </style>
        <img 
            alt="^-^" 
            cache-control="max-age=86400" 
            class="header-img" 
            src="../../../../../../img/favicon.webp" 
        />
        <div class="header-content">
            <a class="logo" href="../../../../../../index.html">blog</a> 
            <span class="description"></span> 
        </div>
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="../../../../../../index.html">é¦–é¡µ</a></li>
            
        
            
                <li><a href="../../../../../../list/">æ–‡ç« </a></li>
            
        
            
                <li><a href="../../../../../../about/">å…³äº</a></li>
            
        
            
                <li><a href="../../../../../../tags/">æ ‡ç­¾</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    k8så®‰è£…éƒ¨ç½²nebulaGraph
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                    <span>æœ€è¿‘æ›´æ–°ï¼š2023-06-22</span> 
                
                
                    
                        &nbsp; | &nbsp;
                    
                     <span>å­—æ•°æ€»è®¡ï¼š8.6k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>é˜…è¯»ä¼°æ—¶ï¼š49åˆ†é’Ÿ</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span id="busuanzi_container_page_pv">
                        é˜…è¯»é‡ï¼š<span id="busuanzi_value_page_pv"></span>æ¬¡
                    </span>
                
            </div>
    

    <div class="post-md">
        
            
                <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link"><span class="post-toc-text">k8sé›†ç¾¤å®‰è£…&amp;nebulaGraphéƒ¨ç½²</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%B8%80%EF%BC%8C%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="post-toc-text">ä¸€ï¼Œé›†ç¾¤ç¯å¢ƒå‡†å¤‡</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%BA%8C%E3%80%81Docker%E9%83%A8%E7%BD%B2"><span class="post-toc-text">äºŒã€Dockeréƒ¨ç½²</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-1-%E9%85%8D%E7%BD%AEDocker-YUM%E6%BA%90"><span class="post-toc-text">2.1 é…ç½®Docker YUMæº</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-2-%E5%AE%89%E8%A3%85Docker-CE"><span class="post-toc-text">2.2 å®‰è£…Docker CE</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-3-%E5%90%AF%E5%8A%A8Docker%E6%9C%8D%E5%8A%A1"><span class="post-toc-text">2.3 å¯åŠ¨DockeræœåŠ¡</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-4-%E9%85%8D%E7%BD%AEDocker%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E5%99%A8"><span class="post-toc-text">2.4 é…ç½®Dockerå®¹å™¨é•œåƒåŠ é€Ÿå™¨</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%B8%89%E3%80%81docker-compose%E5%AE%89%E8%A3%85"><span class="post-toc-text">ä¸‰ã€docker composeå®‰è£…</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%9B%9B%E3%80%81%E6%B7%BB%E5%8A%A0rancher%E7%94%A8%E6%88%B7"><span class="post-toc-text">å››ã€æ·»åŠ rancherç”¨æˆ·</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%BA%94%E3%80%81%E7%94%9F%E6%88%90ssh%E8%AF%81%E4%B9%A6%E7%94%A8%E4%BA%8E%E9%83%A8%E7%BD%B2%E9%9B%86%E7%BE%A4"><span class="post-toc-text">äº”ã€ç”Ÿæˆsshè¯ä¹¦ç”¨äºéƒ¨ç½²é›†ç¾¤</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-1-%E7%94%9F%E6%88%90ssh%E8%AF%81%E4%B9%A6"><span class="post-toc-text">5.1 ç”Ÿæˆsshè¯ä¹¦</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-%E5%A4%8D%E5%88%B6%E8%AF%81%E4%B9%A6%E5%88%B0%E9%9B%86%E7%BE%A4%E4%B8%AD%E6%89%80%E6%9C%89%E4%B8%BB%E6%9C%BA"><span class="post-toc-text">5.2 å¤åˆ¶è¯ä¹¦åˆ°é›†ç¾¤ä¸­æ‰€æœ‰ä¸»æœº</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-3-%E9%AA%8C%E8%AF%81ssh%E8%AF%81%E4%B9%A6%E6%98%AF%E5%90%A6%E5%8F%AF%E7%94%A8"><span class="post-toc-text">5.3 éªŒè¯sshè¯ä¹¦æ˜¯å¦å¯ç”¨</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%85%AD%E3%80%81rke%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD"><span class="post-toc-text">å…­ã€rkeå·¥å…·ä¸‹è½½</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%B8%83%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96rke%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="post-toc-text">ä¸ƒã€åˆå§‹åŒ–rkeé…ç½®æ–‡ä»¶</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%85%AB%E3%80%81%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2"><span class="post-toc-text">å…«ã€é›†ç¾¤éƒ¨ç½²</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%B9%9D%E3%80%81%E5%AE%89%E8%A3%85kubectl%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="post-toc-text">ä¹ã€å®‰è£…kubectlå®¢æˆ·ç«¯</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-1-kubectl%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%89%E8%A3%85"><span class="post-toc-text">9.1 kubectlå®¢æˆ·ç«¯å®‰è£…</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-2-kubectl%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86%E6%96%87%E4%BB%B6%E5%8F%8A%E5%BA%94%E7%94%A8%E9%AA%8C%E8%AF%81"><span class="post-toc-text">9.2 kubectlå®¢æˆ·ç«¯é…ç½®é›†ç¾¤ç®¡ç†æ–‡ä»¶åŠåº”ç”¨éªŒè¯</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%8D%81%E3%80%81%E9%9B%86%E7%BE%A4web%E7%AE%A1%E7%90%86-rancher"><span class="post-toc-text">åã€é›†ç¾¤webç®¡ç† rancher</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-1%EF%BC%8C%E4%BD%BF%E7%94%A8docker-run%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AArancher"><span class="post-toc-text">10.1ï¼Œä½¿ç”¨docker runå¯åŠ¨ä¸€ä¸ªrancher</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-2-%E8%AE%BF%E9%97%AErancher%E3%80%90%E8%BF%99%E9%87%8C%E6%98%A0%E5%B0%84%E7%AB%AF%E5%8F%A31080%EF%BC%8C1443%E3%80%91"><span class="post-toc-text">10.2 è®¿é—®rancherã€è¿™é‡Œæ˜ å°„ç«¯å£1080ï¼Œ1443ã€‘</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-3-%E5%9C%A8rancher-web%E7%95%8C%E9%9D%A2%E6%B7%BB%E5%8A%A0kubernetes%E9%9B%86%E7%BE%A4"><span class="post-toc-text">10.3 åœ¨rancher webç•Œé¢æ·»åŠ kubernetesé›†ç¾¤</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%8D%81%E4%B8%80%EF%BC%8C%E6%90%AD%E5%BB%BAnfs%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="post-toc-text">åä¸€ï¼Œæ­å»ºnfsæœåŠ¡å™¨</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%8D%81%E4%BA%8C-%E4%BD%BF%E7%94%A8NFS%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E5%8A%A8%E6%80%81%E4%BE%9B%E7%BB%99-storageclass%E5%AE%89%E8%A3%85"><span class="post-toc-text">åäºŒ ä½¿ç”¨NFSæ–‡ä»¶ç³»ç»Ÿåˆ›å»ºå­˜å‚¨åŠ¨æ€ä¾›ç»™(storageclasså®‰è£…)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#12-1%EF%BC%8C%E4%B8%8B%E8%BD%BD%E5%B9%B6%E5%88%9B%E5%BB%BAstorageclass"><span class="post-toc-text">12.1ï¼Œä¸‹è½½å¹¶åˆ›å»ºstorageclass</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#12-2%EF%BC%8C%E4%B8%8B%E8%BD%BD%E5%B9%B6%E5%88%9B%E5%BB%BArbac"><span class="post-toc-text">12.2ï¼Œä¸‹è½½å¹¶åˆ›å»ºrbac</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#12-3%EF%BC%8C%E5%88%9B%E5%BB%BA%E5%8A%A8%E6%80%81%E4%BE%9B%E7%BB%99%E7%9A%84deployment"><span class="post-toc-text">12.3ï¼Œåˆ›å»ºåŠ¨æ€ä¾›ç»™çš„deployment</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%8D%81%E4%B8%89%EF%BC%8CnebulaGraph-operator-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2"><span class="post-toc-text">åä¸‰ï¼ŒnebulaGraph operator å®‰è£…éƒ¨ç½²</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%8D%B8%E8%BD%BD-NebulaGraph-Operator"><span class="post-toc-text">å¸è½½ NebulaGraph Operator</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%8D%81%E5%9B%9B%EF%BC%8C%E9%83%A8%E7%BD%B2nebulaGraph%EF%BC%88kubectl%EF%BC%89"><span class="post-toc-text">åå››ï¼Œéƒ¨ç½²nebulaGraphï¼ˆkubectlï¼‰</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%8D%81%E4%BA%94%EF%BC%8C%E8%BF%9E%E6%8E%A5nebula"><span class="post-toc-text">åäº”ï¼Œè¿æ¥nebula</span></a></li></ol></li></ol>
            
        
        <div class=".article-gallery"><h1>k8sé›†ç¾¤å®‰è£…&amp;nebulaGraphéƒ¨ç½²</h1>
<h2 id="ä¸€ï¼Œé›†ç¾¤ç¯å¢ƒå‡†å¤‡">ä¸€ï¼Œé›†ç¾¤ç¯å¢ƒå‡†å¤‡</h2>
<ul>
<li>
<p>é›†ç¾¤è§„åˆ’</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŠŠxxxæ›¿æ¢ä¸ºå¯¹åº”çš„ä¸»æœºå</span></span><br><span class="line"><span class="number">192.168</span>.<span class="number">222.141</span> node1</span><br><span class="line"><span class="number">192.168</span>.<span class="number">222.142</span> node2</span><br><span class="line"><span class="number">192.168</span>.<span class="number">222.143</span> node3</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é…ç½®é™æ€ip</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vi /etc/sysconfig/network-scripts/ifcfg-enss3</span></span><br><span class="line"><span class="comment">#æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼šæ‰€æœ‰é›†ç¾¤éƒ½æ˜¯</span></span><br><span class="line">IPADDR=<span class="string">&quot;192.168.222.XXX&quot;</span></span><br><span class="line">PREFIX=<span class="string">&quot;24&quot;</span></span><br><span class="line">GATEWAY=<span class="string">&quot;192.168.222.x&quot;</span></span><br><span class="line">DNS1=<span class="string">&quot;119.29.29.29&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é…ç½®ä¸»æœºå</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl <span class="built_in">set-hostname</span> xxx</span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">192.168</span>.<span class="number">222.141</span> node1</span><br><span class="line"><span class="number">192.168</span>.<span class="number">222.142</span> node2</span><br><span class="line"><span class="number">192.168</span>.<span class="number">222.143</span> node3</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é…ç½®ip_forwardåŠè¿‡æ»¤æœºåˆ¶</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim /etc/sysctl.conf</span></span><br><span class="line">net.ipv4.ip_forward = <span class="number">1</span></span><br><span class="line">net.bridge.bridge<span class="literal">-nf-call-ip6tables</span> = <span class="number">1</span></span><br><span class="line">net.bridge.bridge<span class="literal">-nf-call-iptables</span> = <span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<pre><code class="language-powershell">modprobe br_netfilter
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ```powershell</span><br><span class="line">  sysctl -p /etc/sysctl.conf</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
<li>
<p>é˜²ç«å¢™</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># systemctl stop firewalld</span></span><br><span class="line"><span class="comment"># systemctl disable firewalld</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>selinux</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ°¸ä¹…å…³é—­ï¼Œä¸€å®šè¦é‡å¯æ“ä½œç³»ç»Ÿåç”Ÿæ•ˆã€‚</span><br><span class="line">sed <span class="literal">-ri</span> <span class="string">&#x27;s/SELINUX=enforcing/SELINUX=disabled/&#x27;</span> /etc/selinux/config</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä¸»æœºswapåˆ†åŒºè®¾ç½®</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="literal">-ri</span> <span class="string">&#x27;s/.*swap.*/#&amp;/&#x27;</span> /etc/fstab</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ—¶é—´åŒæ­¥</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment"># yum -y install ntpdate</span></span><br><span class="line">  <span class="comment"># crontab -e</span></span><br><span class="line"><span class="number">0</span> */<span class="number">1</span> * * *  ntpdate time1.aliyun.com</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="äºŒã€Dockeréƒ¨ç½²">äºŒã€Dockeréƒ¨ç½²</h2>
<blockquote>
<p>æ‰€æœ‰ä¸»æœºå‡è¦é…ç½®</p>
</blockquote>
<h3 id="2-1-é…ç½®Docker-YUMæº">2.1 é…ç½®Docker YUMæº</h3>
<p><a href="image-20220130193936921.png" title="image-20220130193936921" class="gallery-item" style="box-shadow: none;"> <img src="/2023/05/10/%E6%95%B0%E6%8D%AE%E5%BA%93/graphdatabase/k8s%E9%83%A8%E7%BD%B2nebulaGraph//image-20220130193936921.png" alt="image-20220130193936921"></a></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget -O /etc/yum.repos.d/docker-ce.repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span><br></pre></td></tr></table></figure>
<h3 id="2-2-å®‰è£…Docker-CE">2.2 å®‰è£…Docker CE</h3>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  yum install docker-ce-18.09.8-3.el7.x86_64 -y</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-å¯åŠ¨DockeræœåŠ¡">2.3 å¯åŠ¨DockeræœåŠ¡</h3>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># systemctl enable docker</span></span><br><span class="line"><span class="comment"># systemctl start docker</span></span><br></pre></td></tr></table></figure>
<h3 id="2-4-é…ç½®Dockerå®¹å™¨é•œåƒåŠ é€Ÿå™¨">2.4 é…ç½®Dockerå®¹å™¨é•œåƒåŠ é€Ÿå™¨</h3>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim /etc/docker/daemon.json</span></span><br><span class="line"><span class="comment"># cat /etc/docker/daemon.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;registry-mirrors&quot;</span>: [<span class="string">&quot;https://s27w6kze.mirror.aliyuncs.com&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸‰ã€docker-composeå®‰è£…">ä¸‰ã€docker composeå®‰è£…</h2>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># curl -L &quot;https://github.com/docker/compose/releases/download/1.28.5/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># chmod +x /usr/local/bin/docker-compose</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker-compose --version</span></span><br></pre></td></tr></table></figure>
<h2 id="å››ã€æ·»åŠ rancherç”¨æˆ·">å››ã€æ·»åŠ rancherç”¨æˆ·</h2>
<blockquote>
<p>ä½¿ç”¨CentOSæ—¶ï¼Œä¸èƒ½ä½¿ç”¨ root è´¦å·ï¼Œå› æ­¤è¦æ·»åŠ ä¸“ç”¨çš„è´¦å·è¿›è¡Œ dockerç›¸å…³ æ“ä½œã€‚</p>
</blockquote>
<blockquote>
<p>æ‰€æœ‰é›†ç¾¤ä¸»æœºå‡éœ€è¦æ“ä½œ</p>
</blockquote>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># useradd rancher</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># usermod -aG docker rancher</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># echo 123 | passwd --stdin rancher</span></span><br></pre></td></tr></table></figure>
<h2 id="äº”ã€ç”Ÿæˆsshè¯ä¹¦ç”¨äºéƒ¨ç½²é›†ç¾¤">äº”ã€ç”Ÿæˆsshè¯ä¹¦ç”¨äºéƒ¨ç½²é›†ç¾¤</h2>
<blockquote>
<p>rkeäºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…ä¸»æœºä¸Šåˆ›å»ºå¯†é’¥ï¼Œå³ä¸ºcontrolä¸»æœºï¼Œç”¨äºéƒ¨ç½²é›†ç¾¤ã€‚</p>
</blockquote>
<h3 id="5-1-ç”Ÿæˆsshè¯ä¹¦">5.1 ç”Ÿæˆsshè¯ä¹¦</h3>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ssh-keygen</span></span><br></pre></td></tr></table></figure>
<h3 id="5-2-å¤åˆ¶è¯ä¹¦åˆ°é›†ç¾¤ä¸­æ‰€æœ‰ä¸»æœº">5.2 å¤åˆ¶è¯ä¹¦åˆ°é›†ç¾¤ä¸­æ‰€æœ‰ä¸»æœº</h3>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹æ–‡ä»¶å¤¹æ‰€å±ç”¨æˆ·åŠæ‰€å±ç»„</span></span><br><span class="line">chown <span class="literal">-R</span> rancher:rancher /home/rancher</span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ssh-copy-id rancher@master01</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ssh-copy-id rancher@master02</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ssh-copy-id rancher@worker01</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ssh-copy-id rancher@worker02</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ssh-copy-id rancher@etcd01</span></span><br></pre></td></tr></table></figure>
<h3 id="5-3-éªŒè¯sshè¯ä¹¦æ˜¯å¦å¯ç”¨">5.3 éªŒè¯sshè¯ä¹¦æ˜¯å¦å¯ç”¨</h3>
<blockquote>
<p>æœ¬æ¬¡åœ¨master01ä¸Šéƒ¨ç½²rkeäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p>
</blockquote>
<blockquote>
<p>åœ¨rkeäºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…ä¸»æœºæœºæµ‹è¯•è¿æ¥å…¶å®ƒé›†ç¾¤ä¸»æœºï¼ŒéªŒè¯æ˜¯å¦å¯ä½¿ç”¨docker pså‘½ä»¤å³å¯ã€‚</p>
</blockquote>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ssh rancher@ä¸»æœºå</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿œç¨‹ä¸»æœº<span class="comment"># docker ps</span></span><br></pre></td></tr></table></figure>
<h2 id="å…­ã€rkeå·¥å…·ä¸‹è½½">å…­ã€rkeå·¥å…·ä¸‹è½½</h2>
<blockquote>
<p>æœ¬æ¬¡åœ¨master01ä¸Šéƒ¨ç½²rkeäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p>
</blockquote>
<p><a href="image-20220222170808926.png" title="image-20220222170808926" class="gallery-item" style="box-shadow: none;"> <img src="/2023/05/10/%E6%95%B0%E6%8D%AE%E5%BA%93/graphdatabase/k8s%E9%83%A8%E7%BD%B2nebulaGraph//image-20220222170808926.png" alt="image-20220222170808926"></a></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://github.com/rancher/rke/releases/download/v1.3.7/rke_linux-amd64</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mv rke_linux-amd64 /usr/local/bin/rke</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># chmod +x /usr/local/bin/rke</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rke --version</span></span><br><span class="line">rke version v1.<span class="number">3.7</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¸ƒã€åˆå§‹åŒ–rkeé…ç½®æ–‡ä»¶">ä¸ƒã€åˆå§‹åŒ–rkeé…ç½®æ–‡ä»¶</h2>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkdir -p /app/rancher</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd /app/rancher</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rke config --name cluster.yml</span></span><br><span class="line">[+] Cluster Level SSH Private Key Path [~/<span class="type">.ssh</span>/<span class="type">id_rsa</span>]: é›†ç¾¤ç§é’¥è·¯å¾„</span><br><span class="line">[+] Number of Hosts [<span class="number">1</span>]: <span class="number">3</span> é›†ç¾¤ä¸­æœ‰<span class="number">3</span>ä¸ªèŠ‚ç‚¹</span><br><span class="line">[+] SSH Address of host (<span class="number">1</span>) [<span class="type">none</span>]: <span class="number">192.168</span>.<span class="number">10.10</span> ç¬¬ä¸€ä¸ªèŠ‚ç‚¹IPåœ°å€</span><br><span class="line">[+] SSH Port of host (<span class="number">1</span>) [<span class="number">22</span>]: <span class="number">22</span> ç¬¬ä¸€ä¸ªèŠ‚ç‚¹SSHè®¿é—®ç«¯å£</span><br><span class="line">[+] SSH Private Key Path of host (<span class="number">192.168</span>.<span class="number">10.10</span>) [<span class="type">none</span>]: ~/.ssh/id_rsa ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ç§é’¥è·¯å¾„</span><br><span class="line">[+] SSH User of host (<span class="number">192.168</span>.<span class="number">10.10</span>) [<span class="type">ubuntu</span>]: rancher è¿œç¨‹ç”¨æˆ·å</span><br><span class="line">[+] Is host (<span class="number">192.168</span>.<span class="number">10.10</span>) a Control Plane host (y/n)? [<span class="type">y</span>]: y æ˜¯å¦ä¸ºk8sé›†ç¾¤æ§åˆ¶èŠ‚ç‚¹</span><br><span class="line">[+] Is host (<span class="number">192.168</span>.<span class="number">10.10</span>) a Worker host (y/n)? [<span class="type">n</span>]: n ä¸æ˜¯workerèŠ‚ç‚¹</span><br><span class="line">[+] Is host (<span class="number">192.168</span>.<span class="number">10.10</span>) an etcd host (y/n)? [<span class="type">n</span>]: n ä¸æ˜¯etcdèŠ‚ç‚¹</span><br><span class="line">[+] Override Hostname of host (<span class="number">192.168</span>.<span class="number">10.10</span>) [<span class="type">none</span>]: ä¸è¦†ç›–ç°æœ‰ä¸»æœºå</span><br><span class="line">[+] Internal IP of host (<span class="number">192.168</span>.<span class="number">10.10</span>) [<span class="type">none</span>]: ä¸»æœºå±€åŸŸç½‘IPåœ°å€</span><br><span class="line">[+] Docker socket path on host (<span class="number">192.168</span>.<span class="number">10.10</span>) [/<span class="type">var</span>/<span class="type">run</span>/<span class="type">docker.sock</span>]: ä¸»æœºä¸Šdocker.sockè·¯å¾„</span><br><span class="line">[+] SSH Address of host (<span class="number">2</span>) [<span class="type">none</span>]: <span class="number">192.168</span>.<span class="number">10.12</span> ç¬¬äºŒä¸ªèŠ‚ç‚¹</span><br><span class="line">[+] SSH Port of host (<span class="number">2</span>) [<span class="number">22</span>]: <span class="number">22</span> è¿œç¨‹ç«¯å£</span><br><span class="line">[+] SSH Private Key Path of host (<span class="number">192.168</span>.<span class="number">10.12</span>) [<span class="type">none</span>]: ~/.ssh/id_rsa ç§é’¥è·¯å¾„</span><br><span class="line">[+] SSH User of host (<span class="number">192.168</span>.<span class="number">10.12</span>) [<span class="type">ubuntu</span>]: rancher è¿œç¨‹è®¿é—®ç”¨æˆ·</span><br><span class="line">[+] Is host (<span class="number">192.168</span>.<span class="number">10.12</span>) a Control Plane host (y/n)? [<span class="type">y</span>]: n ä¸æ˜¯æ§åˆ¶èŠ‚ç‚¹</span><br><span class="line">[+] Is host (<span class="number">192.168</span>.<span class="number">10.12</span>) a Worker host (y/n)? [<span class="type">n</span>]: y æ˜¯workerèŠ‚ç‚¹</span><br><span class="line">[+] Is host (<span class="number">192.168</span>.<span class="number">10.12</span>) an etcd host (y/n)? [<span class="type">n</span>]: n ä¸æ˜¯etcdèŠ‚ç‚¹</span><br><span class="line">[+] Override Hostname of host (<span class="number">192.168</span>.<span class="number">10.12</span>) [<span class="type">none</span>]: ä¸è¦†ç›–ç°æœ‰ä¸»æœºå</span><br><span class="line">[+] Internal IP of host (<span class="number">192.168</span>.<span class="number">10.12</span>) [<span class="type">none</span>]: ä¸»æœºå±€åŸŸç½‘IPåœ°å€</span><br><span class="line">[+] Docker socket path on host (<span class="number">192.168</span>.<span class="number">10.12</span>) [/<span class="type">var</span>/<span class="type">run</span>/<span class="type">docker.sock</span>]: ä¸»æœºä¸Šdocker.sockè·¯å¾„</span><br><span class="line">[+] SSH Address of host (<span class="number">3</span>) [<span class="type">none</span>]: <span class="number">192.168</span>.<span class="number">10.14</span> ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹</span><br><span class="line">[+] SSH Port of host (<span class="number">3</span>) [<span class="number">22</span>]: <span class="number">22</span> è¿œç¨‹ç«¯å£</span><br><span class="line">[+] SSH Private Key Path of host (<span class="number">192.168</span>.<span class="number">10.14</span>) [<span class="type">none</span>]: ~/.ssh/id_rsa ç§é’¥è·¯å¾„</span><br><span class="line">[+] SSH User of host (<span class="number">192.168</span>.<span class="number">10.14</span>) [<span class="type">ubuntu</span>]: rancher è¿œç¨‹è®¿é—®ç”¨æˆ·</span><br><span class="line">[+] Is host (<span class="number">192.168</span>.<span class="number">10.14</span>) a Control Plane host (y/n)? [<span class="type">y</span>]: n ä¸æ˜¯æ§åˆ¶èŠ‚ç‚¹</span><br><span class="line">[+] Is host (<span class="number">192.168</span>.<span class="number">10.14</span>) a Worker host (y/n)? [<span class="type">n</span>]: n ä¸æ˜¯workerèŠ‚ç‚¹</span><br><span class="line">[+] Is host (<span class="number">192.168</span>.<span class="number">10.14</span>) an etcd host (y/n)? [<span class="type">n</span>]: y æ˜¯etcdèŠ‚ç‚¹</span><br><span class="line">[+] Override Hostname of host (<span class="number">192.168</span>.<span class="number">10.14</span>) [<span class="type">none</span>]: ä¸è¦†ç›–ç°æœ‰ä¸»æœºå</span><br><span class="line">[+] Internal IP of host (<span class="number">192.168</span>.<span class="number">10.14</span>) [<span class="type">none</span>]: ä¸»æœºå±€åŸŸç½‘IPåœ°å€</span><br><span class="line">[+] Docker socket path on host (<span class="number">192.168</span>.<span class="number">10.14</span>) [/<span class="type">var</span>/<span class="type">run</span>/<span class="type">docker.sock</span>]: ä¸»æœºä¸Šdocker.sockè·¯å¾„</span><br><span class="line">[+] Network Plugin <span class="built_in">Type</span> (flannel, calico, weave, canal, aci) [<span class="type">canal</span>]: ä½¿ç”¨çš„ç½‘ç»œæ’ä»¶</span><br><span class="line">[+] Authentication Strategy [<span class="type">x509</span>]: è®¤è¯ç­–ç•¥</span><br><span class="line">[+] Authorization Mode (rbac, none) [<span class="type">rbac</span>]: è®¤è¯æ¨¡å¼</span><br><span class="line">[+] Kubernetes Docker image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>]: é›†ç¾¤å®¹å™¨é•œåƒ</span><br><span class="line">[+] Cluster domain [<span class="type">cluster.local</span>]: é›†ç¾¤åŸŸå</span><br><span class="line">[+] Service Cluster IP Range [<span class="number">10.43</span><span class="type">.0.0</span>/<span class="number">16</span>]: é›†ç¾¤ä¸­Servic IPåœ°å€èŒƒå›´</span><br><span class="line">[+] Enable PodSecurityPolicy [<span class="type">n</span>]: æ˜¯å¦å¼€å¯Podå®‰è£…ç­–ç•¥</span><br><span class="line">[+] Cluster Network CIDR [<span class="number">10.42</span><span class="type">.0.0</span>/<span class="number">16</span>]: é›†ç¾¤Podç½‘ç»œ</span><br><span class="line">[+] Cluster DNS Service IP [<span class="number">10.43</span><span class="type">.0.10</span>]: é›†ç¾¤DNS Service IPåœ°å€</span><br><span class="line">[+] Add addon manifest URLs or YAML files [<span class="type">no</span>]: æ˜¯å¦å¢åŠ æ’ä»¶manifest URLæˆ–é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">master01</span> <span class="type">rancher</span>]<span class="comment"># ls</span></span><br><span class="line">cluster.yml</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨cluster.yamlæ–‡ä»¶ä¸­</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kube<span class="literal">-controller</span>:</span><br><span class="line">image: <span class="string">&quot;&quot;</span></span><br><span class="line">extra_args:</span><br><span class="line"><span class="comment"># å¦‚æœåé¢éœ€è¦éƒ¨ç½²kubeflowæˆ–istioåˆ™ä¸€å®šè¦é…ç½®ä»¥ä¸‹å‚æ•°</span></span><br><span class="line">cluster<span class="literal">-signing-cert-file</span>: <span class="string">&quot;/etc/kubernetes/ssl/kube-ca.pem&quot;</span></span><br><span class="line">cluster<span class="literal">-signing-key-file</span>: <span class="string">&quot;/etc/kubernetes/ssl/kube-ca-key.pem&quot;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="å…«ã€é›†ç¾¤éƒ¨ç½²">å…«ã€é›†ç¾¤éƒ¨ç½²</h2>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pwd</span></span><br><span class="line">/app/rancher</span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rke up</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br></pre></td><td class="code"><pre><span class="line">è¾“å‡ºï¼š</span><br><span class="line">INFO[<span class="number">0000</span>] Running RKE version: v1.<span class="number">3.7</span></span><br><span class="line">INFO[<span class="number">0000</span>] Initiating Kubernetes cluster</span><br><span class="line">INFO[<span class="number">0000</span>] [<span class="type">dialer</span>] Setup tunnel <span class="keyword">for</span> host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0000</span>] [<span class="type">dialer</span>] Setup tunnel <span class="keyword">for</span> host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0000</span>] [<span class="type">dialer</span>] Setup tunnel <span class="keyword">for</span> host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0000</span>] Checking <span class="keyword">if</span> container [<span class="type">cluster</span>-<span class="type">state</span>-<span class="type">deployer</span>] is running on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0000</span>] Checking <span class="keyword">if</span> container [<span class="type">cluster</span>-<span class="type">state</span>-<span class="type">deployer</span>] is running on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0000</span>] Checking <span class="keyword">if</span> container [<span class="type">cluster</span>-<span class="type">state</span>-<span class="type">deployer</span>] is running on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0000</span>] [<span class="type">certificates</span>] Generating CA kubernetes certificates</span><br><span class="line">INFO[<span class="number">0000</span>] [<span class="type">certificates</span>] Generating Kubernetes API server aggregation layer requestheader client CA certificates</span><br><span class="line">INFO[<span class="number">0000</span>] [<span class="type">certificates</span>] GenerateServingCertificate is disabled, checking <span class="keyword">if</span> there are unused kubelet certificates</span><br><span class="line">INFO[<span class="number">0000</span>] [<span class="type">certificates</span>] Generating Kubernetes API server certificates</span><br><span class="line">INFO[<span class="number">0000</span>] [<span class="type">certificates</span>] Generating Service account token key</span><br><span class="line">INFO[<span class="number">0000</span>] [<span class="type">certificates</span>] Generating Kube Controller certificates</span><br><span class="line">INFO[<span class="number">0000</span>] [<span class="type">certificates</span>] Generating Kube Scheduler certificates</span><br><span class="line">INFO[<span class="number">0000</span>] [<span class="type">certificates</span>] Generating Kube Proxy certificates</span><br><span class="line">INFO[<span class="number">0001</span>] [<span class="type">certificates</span>] Generating Node certificate</span><br><span class="line">INFO[<span class="number">0001</span>] [<span class="type">certificates</span>] Generating admin certificates and kubeconfig</span><br><span class="line">INFO[<span class="number">0001</span>] [<span class="type">certificates</span>] Generating Kubernetes API server proxy client certificates</span><br><span class="line">INFO[<span class="number">0001</span>] [<span class="type">certificates</span>] Generating kube<span class="literal">-etcd-192-168-10-14</span> certificate and key</span><br><span class="line">INFO[<span class="number">0001</span>] Successfully Deployed state file at [<span class="type">.</span>/<span class="type">cluster.rkestate</span>]</span><br><span class="line">INFO[<span class="number">0001</span>] Building Kubernetes cluster</span><br><span class="line">INFO[<span class="number">0001</span>] [<span class="type">dialer</span>] Setup tunnel <span class="keyword">for</span> host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0001</span>] [<span class="type">dialer</span>] Setup tunnel <span class="keyword">for</span> host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0001</span>] [<span class="type">dialer</span>] Setup tunnel <span class="keyword">for</span> host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0001</span>] [<span class="type">network</span>] Deploying port listener containers</span><br><span class="line">INFO[<span class="number">0001</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0001</span>] Starting container [<span class="type">rke</span>-<span class="type">etcd</span>-<span class="type">port</span>-<span class="type">listener</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0001</span>] [<span class="type">network</span>] Successfully started [<span class="type">rke</span>-<span class="type">etcd</span>-<span class="type">port</span>-<span class="type">listener</span>] container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0001</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0001</span>] Starting container [<span class="type">rke</span>-<span class="type">cp</span>-<span class="type">port</span>-<span class="type">listener</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0002</span>] [<span class="type">network</span>] Successfully started [<span class="type">rke</span>-<span class="type">cp</span>-<span class="type">port</span>-<span class="type">listener</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0002</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0002</span>] Starting container [<span class="type">rke</span>-<span class="type">worker</span>-<span class="type">port</span>-<span class="type">listener</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0002</span>] [<span class="type">network</span>] Successfully started [<span class="type">rke</span>-<span class="type">worker</span>-<span class="type">port</span>-<span class="type">listener</span>] container on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0002</span>] [<span class="type">network</span>] Port listener containers deployed successfully</span><br><span class="line">INFO[<span class="number">0002</span>] [<span class="type">network</span>] Running control plane -&gt; etcd port checks</span><br><span class="line">INFO[<span class="number">0002</span>] [<span class="type">network</span>] Checking <span class="keyword">if</span> host [<span class="number">192.168</span><span class="type">.10.10</span>] can connect to host(s) [<span class="number">192.168</span><span class="type">.10.14</span>] on port(s) [<span class="number">2379</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0002</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0002</span>] Starting container [<span class="type">rke</span>-<span class="type">port</span>-<span class="type">checker</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0002</span>] [<span class="type">network</span>] Successfully started [<span class="type">rke</span>-<span class="type">port</span>-<span class="type">checker</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0002</span>] Removing container [<span class="type">rke</span>-<span class="type">port</span>-<span class="type">checker</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0002</span>] [<span class="type">network</span>] Running control plane -&gt; worker port checks</span><br><span class="line">INFO[<span class="number">0002</span>] [<span class="type">network</span>] Checking <span class="keyword">if</span> host [<span class="number">192.168</span><span class="type">.10.10</span>] can connect to host(s) [<span class="number">192.168</span><span class="type">.10.12</span>] on port(s) [<span class="number">10250</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0002</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0003</span>] Starting container [<span class="type">rke</span>-<span class="type">port</span>-<span class="type">checker</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0003</span>] [<span class="type">network</span>] Successfully started [<span class="type">rke</span>-<span class="type">port</span>-<span class="type">checker</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0003</span>] Removing container [<span class="type">rke</span>-<span class="type">port</span>-<span class="type">checker</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0003</span>] [<span class="type">network</span>] Running workers -&gt; control plane port checks</span><br><span class="line">INFO[<span class="number">0003</span>] [<span class="type">network</span>] Checking <span class="keyword">if</span> host [<span class="number">192.168</span><span class="type">.10.12</span>] can connect to host(s) [<span class="number">192.168</span><span class="type">.10.10</span>] on port(s) [<span class="number">6443</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0003</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0003</span>] Starting container [<span class="type">rke</span>-<span class="type">port</span>-<span class="type">checker</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0003</span>] [<span class="type">network</span>] Successfully started [<span class="type">rke</span>-<span class="type">port</span>-<span class="type">checker</span>] container on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0003</span>] Removing container [<span class="type">rke</span>-<span class="type">port</span>-<span class="type">checker</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0003</span>] [<span class="type">network</span>] Checking KubeAPI port Control Plane hosts</span><br><span class="line">INFO[<span class="number">0003</span>] [<span class="type">network</span>] Removing port listener containers</span><br><span class="line">INFO[<span class="number">0003</span>] Removing container [<span class="type">rke</span>-<span class="type">etcd</span>-<span class="type">port</span>-<span class="type">listener</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0003</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">etcd</span>-<span class="type">port</span>-<span class="type">listener</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0003</span>] Removing container [<span class="type">rke</span>-<span class="type">cp</span>-<span class="type">port</span>-<span class="type">listener</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0003</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">cp</span>-<span class="type">port</span>-<span class="type">listener</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0003</span>] Removing container [<span class="type">rke</span>-<span class="type">worker</span>-<span class="type">port</span>-<span class="type">listener</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0003</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">worker</span>-<span class="type">port</span>-<span class="type">listener</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0003</span>] [<span class="type">network</span>] Port listener containers removed successfully</span><br><span class="line">INFO[<span class="number">0003</span>] [<span class="type">certificates</span>] Deploying kubernetes certificates to Cluster nodes</span><br><span class="line">INFO[<span class="number">0003</span>] Checking <span class="keyword">if</span> container [<span class="type">cert</span>-<span class="type">deployer</span>] is running on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0003</span>] Checking <span class="keyword">if</span> container [<span class="type">cert</span>-<span class="type">deployer</span>] is running on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0003</span>] Checking <span class="keyword">if</span> container [<span class="type">cert</span>-<span class="type">deployer</span>] is running on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0003</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0003</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0003</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0004</span>] Starting container [<span class="type">cert</span>-<span class="type">deployer</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0004</span>] Starting container [<span class="type">cert</span>-<span class="type">deployer</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0004</span>] Starting container [<span class="type">cert</span>-<span class="type">deployer</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0004</span>] Checking <span class="keyword">if</span> container [<span class="type">cert</span>-<span class="type">deployer</span>] is running on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0004</span>] Checking <span class="keyword">if</span> container [<span class="type">cert</span>-<span class="type">deployer</span>] is running on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0004</span>] Checking <span class="keyword">if</span> container [<span class="type">cert</span>-<span class="type">deployer</span>] is running on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0009</span>] Checking <span class="keyword">if</span> container [<span class="type">cert</span>-<span class="type">deployer</span>] is running on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0009</span>] Removing container [<span class="type">cert</span>-<span class="type">deployer</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0009</span>] Checking <span class="keyword">if</span> container [<span class="type">cert</span>-<span class="type">deployer</span>] is running on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0009</span>] Removing container [<span class="type">cert</span>-<span class="type">deployer</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0009</span>] Checking <span class="keyword">if</span> container [<span class="type">cert</span>-<span class="type">deployer</span>] is running on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0009</span>] Removing container [<span class="type">cert</span>-<span class="type">deployer</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0009</span>] [<span class="type">reconcile</span>] Rebuilding and updating local kube config</span><br><span class="line">INFO[<span class="number">0009</span>] Successfully Deployed local admin kubeconfig at [<span class="type">.</span>/<span class="type">kube_config_cluster.yml</span>]</span><br><span class="line">WARN[<span class="number">0009</span>] [<span class="type">reconcile</span>] host [<span class="number">192.168</span><span class="type">.10.10</span>] is a control plane node without reachable Kubernetes API endpoint <span class="keyword">in</span> the cluster</span><br><span class="line">WARN[<span class="number">0009</span>] [<span class="type">reconcile</span>] no control plane node with reachable Kubernetes API endpoint <span class="keyword">in</span> the cluster found</span><br><span class="line">INFO[<span class="number">0009</span>] [<span class="type">certificates</span>] Successfully deployed kubernetes certificates to Cluster nodes</span><br><span class="line">INFO[<span class="number">0009</span>] [<span class="type">file</span>-<span class="type">deploy</span>] Deploying file [/<span class="type">etc</span>/<span class="type">kubernetes</span>/<span class="type">audit</span>-<span class="type">policy.yaml</span>] to node [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0009</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0009</span>] Starting container [<span class="type">file</span>-<span class="type">deployer</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0009</span>] Successfully started [<span class="type">file</span>-<span class="type">deployer</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0009</span>] Waiting <span class="keyword">for</span> [<span class="type">file</span>-<span class="type">deployer</span>] container to <span class="keyword">exit</span> on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0009</span>] Waiting <span class="keyword">for</span> [<span class="type">file</span>-<span class="type">deployer</span>] container to <span class="keyword">exit</span> on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0009</span>] Container [<span class="type">file</span>-<span class="type">deployer</span>] is still running on host [<span class="number">192.168</span><span class="type">.10.10</span>]: stderr: [], stdout: []</span><br><span class="line">INFO[<span class="number">0010</span>] Waiting <span class="keyword">for</span> [<span class="type">file</span>-<span class="type">deployer</span>] container to <span class="keyword">exit</span> on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0010</span>] Removing container [<span class="type">file</span>-<span class="type">deployer</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0010</span>] [<span class="type">remove</span>/<span class="type">file</span>-<span class="type">deployer</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0010</span>] [/<span class="type">etc</span>/<span class="type">kubernetes</span>/<span class="type">audit</span>-<span class="type">policy.yaml</span>] Successfully deployed audit policy file to Cluster control nodes</span><br><span class="line">INFO[<span class="number">0010</span>] [<span class="type">reconcile</span>] Reconciling cluster state</span><br><span class="line">INFO[<span class="number">0010</span>] [<span class="type">reconcile</span>] This is newly generated cluster</span><br><span class="line">INFO[<span class="number">0010</span>] Pre<span class="literal">-pulling</span> kubernetes images</span><br><span class="line">INFO[<span class="number">0010</span>] Pulling image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0010</span>] Pulling image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0010</span>] Pulling image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0087</span>] Image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0090</span>] Image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] exists on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0092</span>] Image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0092</span>] Kubernetes images pulled successfully</span><br><span class="line">INFO[<span class="number">0092</span>] [<span class="type">etcd</span>] Building up etcd plane..</span><br><span class="line">INFO[<span class="number">0092</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0092</span>] Starting container [<span class="type">etcd</span>-<span class="type">fix</span>-<span class="type">perm</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0092</span>] Successfully started [<span class="type">etcd</span>-<span class="type">fix</span>-<span class="type">perm</span>] container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0092</span>] Waiting <span class="keyword">for</span> [<span class="type">etcd</span>-<span class="type">fix</span>-<span class="type">perm</span>] container to <span class="keyword">exit</span> on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0092</span>] Waiting <span class="keyword">for</span> [<span class="type">etcd</span>-<span class="type">fix</span>-<span class="type">perm</span>] container to <span class="keyword">exit</span> on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0092</span>] Container [<span class="type">etcd</span>-<span class="type">fix</span>-<span class="type">perm</span>] is still running on host [<span class="number">192.168</span><span class="type">.10.14</span>]: stderr: [], stdout: []</span><br><span class="line">INFO[<span class="number">0093</span>] Waiting <span class="keyword">for</span> [<span class="type">etcd</span>-<span class="type">fix</span>-<span class="type">perm</span>] container to <span class="keyword">exit</span> on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0093</span>] Removing container [<span class="type">etcd</span>-<span class="type">fix</span>-<span class="type">perm</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0093</span>] [<span class="type">remove</span>/<span class="type">etcd</span>-<span class="type">fix</span>-<span class="type">perm</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0093</span>] Image [<span class="type">rancher</span>/<span class="type">mirrored</span>-<span class="type">coreos</span>-<span class="type">etcd</span>:<span class="type">v3.5.0</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0093</span>] Starting container [<span class="type">etcd</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0093</span>] [<span class="type">etcd</span>] Successfully started [<span class="type">etcd</span>] container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0093</span>] [<span class="type">etcd</span>] Running rolling snapshot container [<span class="type">etcd</span>-<span class="type">snapshot</span>-<span class="type">once</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0093</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0094</span>] Starting container [<span class="type">etcd</span>-<span class="type">rolling</span>-<span class="type">snapshots</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0094</span>] [<span class="type">etcd</span>] Successfully started [<span class="type">etcd</span>-<span class="type">rolling</span>-<span class="type">snapshots</span>] container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0099</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0099</span>] Starting container [<span class="type">rke</span>-<span class="type">bundle</span>-<span class="type">cert</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0099</span>] [<span class="type">certificates</span>] Successfully started [<span class="type">rke</span>-<span class="type">bundle</span>-<span class="type">cert</span>] container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0099</span>] Waiting <span class="keyword">for</span> [<span class="type">rke</span>-<span class="type">bundle</span>-<span class="type">cert</span>] container to <span class="keyword">exit</span> on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0099</span>] Container [<span class="type">rke</span>-<span class="type">bundle</span>-<span class="type">cert</span>] is still running on host [<span class="number">192.168</span><span class="type">.10.14</span>]: stderr: [], stdout: []</span><br><span class="line">INFO[<span class="number">0100</span>] Waiting <span class="keyword">for</span> [<span class="type">rke</span>-<span class="type">bundle</span>-<span class="type">cert</span>] container to <span class="keyword">exit</span> on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0100</span>] [<span class="type">certificates</span>] successfully saved certificate bundle [/<span class="type">opt</span>/<span class="type">rke</span>/<span class="type">etcd</span>-<span class="type">snapshots</span>//<span class="type">pki.bundle.tar.gz</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0100</span>] Removing container [<span class="type">rke</span>-<span class="type">bundle</span>-<span class="type">cert</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0100</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0100</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0100</span>] [<span class="type">etcd</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0100</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0100</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0100</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0101</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0101</span>] [<span class="type">etcd</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0101</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0101</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0101</span>] [<span class="type">etcd</span>] Successfully started etcd plane.. Checking etcd cluster health</span><br><span class="line">INFO[<span class="number">0101</span>] [<span class="type">etcd</span>] etcd host [<span class="number">192.168</span><span class="type">.10.14</span>] reported healthy=true</span><br><span class="line">INFO[<span class="number">0101</span>] [<span class="type">controlplane</span>] Building up Controller Plane..</span><br><span class="line">INFO[<span class="number">0101</span>] Checking <span class="keyword">if</span> container [<span class="type">service</span>-<span class="type">sidekick</span>] is running on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0101</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0101</span>] Image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0101</span>] Starting container [<span class="type">kube</span>-<span class="type">apiserver</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0101</span>] [<span class="type">controlplane</span>] Successfully started [<span class="type">kube</span>-<span class="type">apiserver</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0101</span>] [<span class="type">healthcheck</span>] <span class="built_in">Start</span> Healthcheck on service [<span class="type">kube</span>-<span class="type">apiserver</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0106</span>] [<span class="type">healthcheck</span>] service [<span class="type">kube</span>-<span class="type">apiserver</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>] is healthy</span><br><span class="line">INFO[<span class="number">0106</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0107</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0107</span>] [<span class="type">controlplane</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0107</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0107</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0107</span>] Image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0107</span>] Starting container [<span class="type">kube</span>-<span class="type">controller</span>-<span class="type">manager</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0107</span>] [<span class="type">controlplane</span>] Successfully started [<span class="type">kube</span>-<span class="type">controller</span>-<span class="type">manager</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0107</span>] [<span class="type">healthcheck</span>] <span class="built_in">Start</span> Healthcheck on service [<span class="type">kube</span>-<span class="type">controller</span>-<span class="type">manager</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0112</span>] [<span class="type">healthcheck</span>] service [<span class="type">kube</span>-<span class="type">controller</span>-<span class="type">manager</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>] is healthy</span><br><span class="line">INFO[<span class="number">0112</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0113</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0113</span>] [<span class="type">controlplane</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0113</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0113</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0113</span>] Image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0113</span>] Starting container [<span class="type">kube</span>-<span class="type">scheduler</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0113</span>] [<span class="type">controlplane</span>] Successfully started [<span class="type">kube</span>-<span class="type">scheduler</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0113</span>] [<span class="type">healthcheck</span>] <span class="built_in">Start</span> Healthcheck on service [<span class="type">kube</span>-<span class="type">scheduler</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0118</span>] [<span class="type">healthcheck</span>] service [<span class="type">kube</span>-<span class="type">scheduler</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>] is healthy</span><br><span class="line">INFO[<span class="number">0118</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0119</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">controlplane</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0119</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">controlplane</span>] Successfully started Controller Plane..</span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">authz</span>] Creating rke<span class="literal">-job-deployer</span> ServiceAccount</span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">authz</span>] rke<span class="literal">-job-deployer</span> ServiceAccount created successfully</span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">authz</span>] Creating system:node ClusterRoleBinding</span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">authz</span>] system:node ClusterRoleBinding created successfully</span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">authz</span>] Creating kube<span class="literal">-apiserver</span> proxy ClusterRole and ClusterRoleBinding</span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">authz</span>] kube<span class="literal">-apiserver</span> proxy ClusterRole and ClusterRoleBinding created successfully</span><br><span class="line">INFO[<span class="number">0119</span>] Successfully Deployed state file at [<span class="type">.</span>/<span class="type">cluster.rkestate</span>]</span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">state</span>] Saving full cluster state to Kubernetes</span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">state</span>] Successfully Saved full cluster state to Kubernetes ConfigMap: full<span class="literal">-cluster-state</span></span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">worker</span>] Building up Worker Plane..</span><br><span class="line">INFO[<span class="number">0119</span>] Checking <span class="keyword">if</span> container [<span class="type">service</span>-<span class="type">sidekick</span>] is running on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0119</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0119</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">sidekick</span>] Sidekick container already created on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0119</span>] Image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0119</span>] Starting container [<span class="type">kubelet</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">worker</span>] Successfully started [<span class="type">kubelet</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">healthcheck</span>] <span class="built_in">Start</span> Healthcheck on service [<span class="type">kubelet</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0119</span>] Starting container [<span class="type">nginx</span>-<span class="type">proxy</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">worker</span>] Successfully started [<span class="type">nginx</span>-<span class="type">proxy</span>] container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0119</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0119</span>] Starting container [<span class="type">nginx</span>-<span class="type">proxy</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0119</span>] [<span class="type">worker</span>] Successfully started [<span class="type">nginx</span>-<span class="type">proxy</span>] container on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0119</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0119</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0120</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0120</span>] [<span class="type">worker</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0120</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0120</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0120</span>] Checking <span class="keyword">if</span> container [<span class="type">service</span>-<span class="type">sidekick</span>] is running on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0120</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0120</span>] [<span class="type">worker</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] container on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0120</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0120</span>] Image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0120</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0120</span>] Checking <span class="keyword">if</span> container [<span class="type">service</span>-<span class="type">sidekick</span>] is running on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0120</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0120</span>] Starting container [<span class="type">kubelet</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0120</span>] [<span class="type">worker</span>] Successfully started [<span class="type">kubelet</span>] container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0120</span>] [<span class="type">healthcheck</span>] <span class="built_in">Start</span> Healthcheck on service [<span class="type">kubelet</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0120</span>] Image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] exists on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0120</span>] Starting container [<span class="type">kubelet</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0120</span>] [<span class="type">worker</span>] Successfully started [<span class="type">kubelet</span>] container on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0120</span>] [<span class="type">healthcheck</span>] <span class="built_in">Start</span> Healthcheck on service [<span class="type">kubelet</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0124</span>] [<span class="type">healthcheck</span>] service [<span class="type">kubelet</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>] is healthy</span><br><span class="line">INFO[<span class="number">0124</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0124</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0125</span>] [<span class="type">worker</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0125</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0125</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0125</span>] Image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0125</span>] Starting container [<span class="type">kube</span>-<span class="type">proxy</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0125</span>] [<span class="type">worker</span>] Successfully started [<span class="type">kube</span>-<span class="type">proxy</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0125</span>] [<span class="type">healthcheck</span>] <span class="built_in">Start</span> Healthcheck on service [<span class="type">kube</span>-<span class="type">proxy</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0125</span>] [<span class="type">healthcheck</span>] service [<span class="type">kubelet</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>] is healthy</span><br><span class="line">INFO[<span class="number">0125</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0125</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0125</span>] [<span class="type">healthcheck</span>] service [<span class="type">kubelet</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>] is healthy</span><br><span class="line">INFO[<span class="number">0125</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0125</span>] [<span class="type">worker</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0125</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0125</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0126</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0126</span>] Image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0126</span>] Starting container [<span class="type">kube</span>-<span class="type">proxy</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0126</span>] [<span class="type">worker</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] container on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0126</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0126</span>] [<span class="type">worker</span>] Successfully started [<span class="type">kube</span>-<span class="type">proxy</span>] container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0126</span>] [<span class="type">healthcheck</span>] <span class="built_in">Start</span> Healthcheck on service [<span class="type">kube</span>-<span class="type">proxy</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0126</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0126</span>] Image [<span class="type">rancher</span>/<span class="type">hyperkube</span>:<span class="type">v1.21.9</span>-<span class="type">rancher1</span>] exists on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0126</span>] Starting container [<span class="type">kube</span>-<span class="type">proxy</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0126</span>] [<span class="type">worker</span>] Successfully started [<span class="type">kube</span>-<span class="type">proxy</span>] container on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0126</span>] [<span class="type">healthcheck</span>] <span class="built_in">Start</span> Healthcheck on service [<span class="type">kube</span>-<span class="type">proxy</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0130</span>] [<span class="type">healthcheck</span>] service [<span class="type">kube</span>-<span class="type">proxy</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>] is healthy</span><br><span class="line">INFO[<span class="number">0130</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0130</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0130</span>] [<span class="type">worker</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0130</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0130</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0131</span>] [<span class="type">healthcheck</span>] service [<span class="type">kube</span>-<span class="type">proxy</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>] is healthy</span><br><span class="line">INFO[<span class="number">0131</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0131</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0131</span>] [<span class="type">healthcheck</span>] service [<span class="type">kube</span>-<span class="type">proxy</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>] is healthy</span><br><span class="line">INFO[<span class="number">0131</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0131</span>] [<span class="type">worker</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0131</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0131</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0131</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0131</span>] [<span class="type">worker</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] container on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0131</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0131</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">linker</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0131</span>] [<span class="type">worker</span>] Successfully started Worker Plane..</span><br><span class="line">INFO[<span class="number">0131</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0131</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0131</span>] Image [<span class="type">rancher</span>/<span class="type">rke</span>-<span class="type">tools</span>:<span class="type">v0.1.78</span>] exists on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0132</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">cleaner</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0132</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">cleaner</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0132</span>] Starting container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">cleaner</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0132</span>] [<span class="type">cleanup</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">cleaner</span>] container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0132</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">cleaner</span>] on host [<span class="number">192.168</span><span class="type">.10.14</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0132</span>] [<span class="type">cleanup</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">cleaner</span>] container on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0132</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">cleaner</span>] on host [<span class="number">192.168</span><span class="type">.10.12</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0132</span>] [<span class="type">cleanup</span>] Successfully started [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">cleaner</span>] container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0132</span>] Removing container [<span class="type">rke</span>-<span class="type">log</span>-<span class="type">cleaner</span>] on host [<span class="number">192.168</span><span class="type">.10.10</span>], <span class="keyword">try</span> <span class="comment">#1</span></span><br><span class="line">INFO[<span class="number">0132</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">cleaner</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.14</span>]</span><br><span class="line">INFO[<span class="number">0132</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">cleaner</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.12</span>]</span><br><span class="line">INFO[<span class="number">0132</span>] [<span class="type">remove</span>/<span class="type">rke</span>-<span class="type">log</span>-<span class="type">cleaner</span>] Successfully removed container on host [<span class="number">192.168</span><span class="type">.10.10</span>]</span><br><span class="line">INFO[<span class="number">0132</span>] [<span class="type">sync</span>] Syncing nodes Labels and Taints</span><br><span class="line">INFO[<span class="number">0132</span>] [<span class="type">sync</span>] Successfully synced nodes Labels and Taints</span><br><span class="line">INFO[<span class="number">0132</span>] [<span class="type">network</span>] Setting up network plugin: canal</span><br><span class="line">INFO[<span class="number">0132</span>] [<span class="type">addons</span>] Saving ConfigMap <span class="keyword">for</span> addon rke<span class="literal">-network-plugin</span> to Kubernetes</span><br><span class="line">INFO[<span class="number">0132</span>] [<span class="type">addons</span>] Successfully saved ConfigMap <span class="keyword">for</span> addon rke<span class="literal">-network-plugin</span> to Kubernetes</span><br><span class="line">INFO[<span class="number">0132</span>] [<span class="type">addons</span>] Executing deploy job rke<span class="literal">-network-plugin</span></span><br><span class="line">INFO[<span class="number">0137</span>] [<span class="type">addons</span>] Setting up coredns</span><br><span class="line">INFO[<span class="number">0137</span>] [<span class="type">addons</span>] Saving ConfigMap <span class="keyword">for</span> addon rke<span class="literal">-coredns-addon</span> to Kubernetes</span><br><span class="line">INFO[<span class="number">0137</span>] [<span class="type">addons</span>] Successfully saved ConfigMap <span class="keyword">for</span> addon rke<span class="literal">-coredns-addon</span> to Kubernetes</span><br><span class="line">INFO[<span class="number">0137</span>] [<span class="type">addons</span>] Executing deploy job rke<span class="literal">-coredns-addon</span></span><br><span class="line">INFO[<span class="number">0142</span>] [<span class="type">addons</span>] CoreDNS deployed successfully</span><br><span class="line">INFO[<span class="number">0142</span>] [<span class="type">dns</span>] DNS provider coredns deployed successfully</span><br><span class="line">INFO[<span class="number">0142</span>] [<span class="type">addons</span>] Setting up Metrics Server</span><br><span class="line">INFO[<span class="number">0142</span>] [<span class="type">addons</span>] Saving ConfigMap <span class="keyword">for</span> addon rke<span class="literal">-metrics-addon</span> to Kubernetes</span><br><span class="line">INFO[<span class="number">0142</span>] [<span class="type">addons</span>] Successfully saved ConfigMap <span class="keyword">for</span> addon rke<span class="literal">-metrics-addon</span> to Kubernetes</span><br><span class="line">INFO[<span class="number">0142</span>] [<span class="type">addons</span>] Executing deploy job rke<span class="literal">-metrics-addon</span></span><br><span class="line">INFO[<span class="number">0147</span>] [<span class="type">addons</span>] Metrics Server deployed successfully</span><br><span class="line">INFO[<span class="number">0147</span>] [<span class="type">ingress</span>] Setting up nginx ingress controller</span><br><span class="line">INFO[<span class="number">0147</span>] [<span class="type">ingress</span>] removing admission batch jobs <span class="keyword">if</span> they exist</span><br><span class="line">INFO[<span class="number">0147</span>] [<span class="type">addons</span>] Saving ConfigMap <span class="keyword">for</span> addon rke<span class="literal">-ingress-controller</span> to Kubernetes</span><br><span class="line">INFO[<span class="number">0147</span>] [<span class="type">addons</span>] Successfully saved ConfigMap <span class="keyword">for</span> addon rke<span class="literal">-ingress-controller</span> to Kubernetes</span><br><span class="line">INFO[<span class="number">0147</span>] [<span class="type">addons</span>] Executing deploy job rke<span class="literal">-ingress-controller</span></span><br><span class="line">INFO[<span class="number">0152</span>] [<span class="type">ingress</span>] removing default backend service and deployment <span class="keyword">if</span> they exist</span><br><span class="line">INFO[<span class="number">0152</span>] [<span class="type">ingress</span>] ingress controller nginx deployed successfully</span><br><span class="line">INFO[<span class="number">0152</span>] [<span class="type">addons</span>] Setting up user addons</span><br><span class="line">INFO[<span class="number">0152</span>] [<span class="type">addons</span>] no user addons defined</span><br><span class="line">INFO[<span class="number">0152</span>] Finished building Kubernetes cluster successfully</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚æœéƒ¨ç½²å¤±è´¥ï¼ŒæŠ¥é”™ï¼š</p>
<p>WARN[0114] [etcd] host [xxxxxxx] failed to check etcd health: failed to get /health for host [xxxxxxx]: Get â€œ<a target="_blank" rel="noopener" href="https://xxxxxxxx:2379/health">https://xxxxxxxx:2379/health</a>â€: remote error: tls: bad certificate<br>
FATA[0114] [etcd] Failed to bring up Etcd Plane: etcd cluster is unhealthy: hosts [xxxxxxxx] failed to report healthy. Check etcd container logs on each host for more information</p>
<p>æ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œï¼ˆæ— æ³•åˆ é™¤å°±é‡å¯æœºå™¨ï¼‰ï¼šrm -rf /etc/kubernetes/ /var/lib/kubelet/ /var/lib/etcd/</p>
</blockquote>
<h2 id="ä¹ã€å®‰è£…kubectlå®¢æˆ·ç«¯">ä¹ã€å®‰è£…kubectlå®¢æˆ·ç«¯</h2>
<blockquote>
<p>åœ¨master01ä¸»æœºä¸Šæ“ä½œã€‚</p>
</blockquote>
<h3 id="9-1-kubectlå®¢æˆ·ç«¯å®‰è£…">9.1 kubectlå®¢æˆ·ç«¯å®‰è£…</h3>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://storage.googleapis.com/kubernetes-release/release/v1.21.9/bin/linux/amd64/kubectl</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># chmod +x kubectl </span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mv kubectl /usr/local/bin/kubectl</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kubectl version --client</span></span><br><span class="line">Client Version: version.Info&#123;Major:<span class="string">&quot;1&quot;</span>, Minor:<span class="string">&quot;21&quot;</span>, GitVersion:<span class="string">&quot;v1.21.9&quot;</span>, GitCommit:<span class="string">&quot;f59f5c2fda36e4036b49ec027e556a15456108f0&quot;</span>, GitTreeState:<span class="string">&quot;clean&quot;</span>, BuildDate:<span class="string">&quot;2022-01-19T17:33:06Z&quot;</span>, GoVersion:<span class="string">&quot;go1.16.12&quot;</span>, Compiler:<span class="string">&quot;gc&quot;</span>, Platform:<span class="string">&quot;linux/amd64&quot;</span>&#125;</span><br></pre></td></tr></table></figure>
<h3 id="9-2-kubectlå®¢æˆ·ç«¯é…ç½®é›†ç¾¤ç®¡ç†æ–‡ä»¶åŠåº”ç”¨éªŒè¯">9.2 kubectlå®¢æˆ·ç«¯é…ç½®é›†ç¾¤ç®¡ç†æ–‡ä»¶åŠåº”ç”¨éªŒè¯</h3>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">master01</span> ~]<span class="comment"># ls /app/rancher/</span></span><br><span class="line">cluster.rkestate  cluster.yml  kube_config_cluster.yml</span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">master01</span> ~]<span class="comment"># mkdir ./.kube</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">master01</span> ~]<span class="comment"># cp /app/rancher/kube_config_cluster.yml /root/.kube/config</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">master01</span> ~]<span class="comment"># kubectl get nodes</span></span><br><span class="line">NAME            STATUS   ROLES          AGE     VERSION</span><br><span class="line"><span class="number">192.168</span>.<span class="number">10.10</span>   Ready    controlplane   <span class="number">9</span>m13s   v1.<span class="number">21.9</span></span><br><span class="line"><span class="number">192.168</span>.<span class="number">10.12</span>   Ready    worker         <span class="number">9</span>m12s   v1.<span class="number">21.9</span></span><br><span class="line"><span class="number">192.168</span>.<span class="number">10.14</span>   Ready    etcd           <span class="number">9</span>m12s   v1.<span class="number">21.9</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">master01</span> ~]<span class="comment"># kubectl get pods -n kube-system</span></span><br><span class="line">NAME                                         READY   STATUS      RESTARTS   AGE</span><br><span class="line">calico<span class="literal">-kube-controllers-5685fbd9f7-gcwj7</span>     <span class="number">1</span>/<span class="number">1</span>     Running     <span class="number">0</span>          <span class="number">9</span>m36s</span><br><span class="line">canal<span class="literal">-fz2bg</span>                                  <span class="number">2</span>/<span class="number">2</span>     Running     <span class="number">0</span>          <span class="number">9</span>m36s</span><br><span class="line">canal<span class="literal">-qzw4n</span>                                  <span class="number">2</span>/<span class="number">2</span>     Running     <span class="number">0</span>          <span class="number">9</span>m36s</span><br><span class="line">canal<span class="literal">-sstjn</span>                                  <span class="number">2</span>/<span class="number">2</span>     Running     <span class="number">0</span>          <span class="number">9</span>m36s</span><br><span class="line">coredns<span class="literal">-8578b6dbdd-ftnf6</span>                     <span class="number">1</span>/<span class="number">1</span>     Running     <span class="number">0</span>          <span class="number">9</span>m30s</span><br><span class="line">coredns<span class="literal">-autoscaler-f7b68ccb7-fzdgc</span>           <span class="number">1</span>/<span class="number">1</span>     Running     <span class="number">0</span>          <span class="number">9</span>m30s</span><br><span class="line">metrics<span class="literal">-server-6bc7854fb5-kwppz</span>              <span class="number">1</span>/<span class="number">1</span>     Running     <span class="number">0</span>          <span class="number">9</span>m25s</span><br><span class="line">rke<span class="literal">-coredns-addon-deploy-job--1-x56w2</span>        <span class="number">0</span>/<span class="number">1</span>     Completed   <span class="number">0</span>          <span class="number">9</span>m31s</span><br><span class="line">rke<span class="literal">-ingress-controller-deploy-job--1-wzp2b</span>   <span class="number">0</span>/<span class="number">1</span>     Completed   <span class="number">0</span>          <span class="number">9</span>m21s</span><br><span class="line">rke<span class="literal">-metrics-addon-deploy-job--1-ltlgn</span>        <span class="number">0</span>/<span class="number">1</span>     Completed   <span class="number">0</span>          <span class="number">9</span>m26s</span><br><span class="line">rke<span class="literal">-network-plugin-deploy-job--1-nsbfn</span>       <span class="number">0</span>/<span class="number">1</span>     Completed   <span class="number">0</span>          <span class="number">9</span>m41s</span><br></pre></td></tr></table></figure>
<h2 id="åã€é›†ç¾¤webç®¡ç†-rancher">åã€é›†ç¾¤webç®¡ç† rancher</h2>
<blockquote>
<p>åœ¨master01è¿è¡Œ</p>
</blockquote>
<p>rancheræ§åˆ¶é¢æ¿ä¸»è¦æ–¹ä¾¿ç”¨äºæ§åˆ¶k8sé›†ç¾¤ï¼ŒæŸ¥çœ‹é›†ç¾¤çŠ¶æ€ï¼Œç¼–è¾‘é›†ç¾¤ç­‰ã€‚</p>
<h3 id="10-1ï¼Œä½¿ç”¨docker-runå¯åŠ¨ä¸€ä¸ªrancher">10.1ï¼Œä½¿ç”¨docker runå¯åŠ¨ä¸€ä¸ªrancher</h3>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³¨æ„æ˜ å°„ç«¯å£æ”¹äº†</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">master01</span> ~]<span class="comment"># docker run -d --restart=unless-stopped --privileged --name rancher -p 1080:80 -p 1443:443 rancher/rancher:v2.5.9</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">master01</span> ~]<span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE                                COMMAND                  CREATED          STATUS          PORTS                                                                      NAMES</span><br><span class="line"><span class="number">0</span>fd46ee77655   rancher/rancher:v2.<span class="number">5.9</span>               <span class="string">&quot;entrypoint.sh&quot;</span>          <span class="number">5</span> seconds ago    Up <span class="number">3</span> seconds    <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">80</span>-&gt;<span class="number">80</span>/tcp, :::<span class="number">80</span>-&gt;<span class="number">80</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">443</span>-&gt;<span class="number">443</span>/tcp, :::<span class="number">443</span>-&gt;<span class="number">443</span>/tcp   rancher</span><br></pre></td></tr></table></figure>
<h3 id="10-2-è®¿é—®rancherã€è¿™é‡Œæ˜ å°„ç«¯å£1080ï¼Œ1443ã€‘">10.2 è®¿é—®rancherã€è¿™é‡Œæ˜ å°„ç«¯å£1080ï¼Œ1443ã€‘</h3>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">master01</span> ~]<span class="comment"># ss -anput | grep &quot;:1080&quot;</span></span><br><span class="line">tcp    LISTEN     <span class="number">0</span>      <span class="number">128</span>       *:<span class="number">1080</span>                    *:*                   users:((<span class="string">&quot;docker-proxy&quot;</span>,pid=<span class="number">29564</span>,fd=<span class="number">4</span>))</span><br><span class="line">tcp    LISTEN     <span class="number">0</span>      <span class="number">128</span>    [::]:<span class="number">1080</span>                 [::]:*                   users:((<span class="string">&quot;docker-proxy&quot;</span>,pid=<span class="number">29570</span>,fd=<span class="number">4</span>))</span><br></pre></td></tr></table></figure>
<p><a href="image-20220222120525765.png" title="image-20220222120525765" class="gallery-item" style="box-shadow: none;"> <img src="/2023/05/10/%E6%95%B0%E6%8D%AE%E5%BA%93/graphdatabase/k8s%E9%83%A8%E7%BD%B2nebulaGraph//image-20220222120525765.png" alt="image-20220222120525765"></a></p>
<p><a href="image-20220222120615706.png" title="image-20220222120615706" class="gallery-item" style="box-shadow: none;"> <img src="/2023/05/10/%E6%95%B0%E6%8D%AE%E5%BA%93/graphdatabase/k8s%E9%83%A8%E7%BD%B2nebulaGraph//image-20220222120615706.png" alt="image-20220222120615706"></a></p>
<p><a href="image-20220222120657384.png" title="image-20220222120657384" class="gallery-item" style="box-shadow: none;"> <img src="/2023/05/10/%E6%95%B0%E6%8D%AE%E5%BA%93/graphdatabase/k8s%E9%83%A8%E7%BD%B2nebulaGraph//image-20220222120657384.png" alt="image-20220222120657384"></a></p>
<p><a href="image-20220222121036160.png" title="image-20220222121036160" class="gallery-item" style="box-shadow: none;"> <img src="/2023/05/10/%E6%95%B0%E6%8D%AE%E5%BA%93/graphdatabase/k8s%E9%83%A8%E7%BD%B2nebulaGraph//image-20220222121036160.png" alt="image-20220222121036160"></a></p>
<p><a href="image-20220222121132181.png" title="image-20220222121132181" class="gallery-item" style="box-shadow: none;"> <img src="/2023/05/10/%E6%95%B0%E6%8D%AE%E5%BA%93/graphdatabase/k8s%E9%83%A8%E7%BD%B2nebulaGraph//image-20220222121132181.png" alt="image-20220222121132181"></a></p>
<h3 id="10-3-åœ¨rancher-webç•Œé¢æ·»åŠ kubernetesé›†ç¾¤">10.3 åœ¨rancher webç•Œé¢æ·»åŠ kubernetesé›†ç¾¤</h3>
<p><a href="image-20220222121419801.png" title="image-20220222121419801" class="gallery-item" style="box-shadow: none;"> <img src="/2023/05/10/%E6%95%B0%E6%8D%AE%E5%BA%93/graphdatabase/k8s%E9%83%A8%E7%BD%B2nebulaGraph//image-20220222121419801.png" alt="image-20220222121419801"></a></p>
<p><a href="image-20220222121500369.png" title="image-20220222121500369" class="gallery-item" style="box-shadow: none;"> <img src="/2023/05/10/%E6%95%B0%E6%8D%AE%E5%BA%93/graphdatabase/k8s%E9%83%A8%E7%BD%B2nebulaGraph//image-20220222121500369.png" alt="image-20220222121500369"></a></p>
<p><a href="image-20220222121639207.png" title="image-20220222121639207" class="gallery-item" style="box-shadow: none;"> <img src="/2023/05/10/%E6%95%B0%E6%8D%AE%E5%BA%93/graphdatabase/k8s%E9%83%A8%E7%BD%B2nebulaGraph//image-20220222121639207.png" alt="image-20220222121639207"></a></p>
<p><a href="image-20220222121800708.png" title="image-20220222121800708" class="gallery-item" style="box-shadow: none;"> <img src="/2023/05/10/%E6%95%B0%E6%8D%AE%E5%BA%93/graphdatabase/k8s%E9%83%A8%E7%BD%B2nebulaGraph//image-20220222121800708.png" alt="image-20220222121800708"></a></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ç¬¬ä¸€æ¡æŠ¥é”™ï¼š</span><br><span class="line">[<span class="type">root</span>@<span class="type">master01</span> ~]<span class="comment"># kubectl apply -f https://192.168.10.10/v3/import/vljtg5srnznpzts662q6ncs4jm6f8kd847xqs97d6fbs5rhn7kfzvk_c-ktwhn.yaml</span></span><br><span class="line">Unable to connect to the server: x509: certificate is valid <span class="keyword">for</span> <span class="number">127.0</span>.<span class="number">0.1</span>, <span class="number">172.17</span>.<span class="number">0.2</span>, not <span class="number">192.168</span>.<span class="number">10.10</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ç¬¬äºŒæ¡ï¼š</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€æ¬¡æŠ¥é”™ï¼š</span><br><span class="line">[<span class="type">root</span>@<span class="type">master01</span> ~]<span class="comment"># curl --insecure -sfL https://192.168.10.10/v3/import/vljtg5srnznpzts662q6ncs4jm6f8kd847xqs97d6fbs5rhn7kfzvk_c-ktwhn.yaml | kubectl apply -f -</span></span><br><span class="line">error: no objects passed to apply</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç¬¬äºŒæ¬¡æˆåŠŸï¼š</span><br><span class="line"></span><br><span class="line">[<span class="type">root</span>@<span class="type">master01</span> ~]<span class="comment"># curl --insecure -sfL https://192.168.10.10/v3/import/vljtg5srnznpzts662q6ncs4jm6f8kd847xqs97d6fbs5rhn7kfzvk_c-ktwhn.yaml | kubectl apply -f -</span></span><br><span class="line">Warning: resource clusterroles/proxy<span class="literal">-clusterrole-kubeapiserver</span> is missing the kubectl.kubernetes.io/last<span class="literal">-applied-configuration</span> annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create <span class="literal">--save-config</span> or kubectl apply. The missing annotation will be patched automatically.</span><br><span class="line">clusterrole.rbac.authorization.k8s.io/proxy<span class="literal">-clusterrole-kubeapiserver</span> configured</span><br><span class="line">Warning: resource clusterrolebindings/proxy<span class="literal">-role-binding-kubernetes-master</span> is missing the kubectl.kubernetes.io/last<span class="literal">-applied-configuration</span> annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create <span class="literal">--save-config</span> or kubectl apply. The missing annotation will be patched automatically.</span><br><span class="line">clusterrolebinding.rbac.authorization.k8s.io/proxy<span class="literal">-role-binding-kubernetes-master</span> configured</span><br><span class="line">namespace/cattle<span class="literal">-system</span> created</span><br><span class="line">serviceaccount/cattle created</span><br><span class="line">clusterrolebinding.rbac.authorization.k8s.io/cattle<span class="literal">-admin-binding</span> created</span><br><span class="line">secret/cattle<span class="literal">-credentials-0619853</span> created</span><br><span class="line">clusterrole.rbac.authorization.k8s.io/cattle<span class="literal">-admin</span> created</span><br><span class="line">Warning: spec.template.spec.affinity.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms[<span class="number">0</span>].matchExpressions[<span class="number">0</span>].key: beta.kubernetes.io/os is deprecated since v1.<span class="number">14</span>; use <span class="string">&quot;kubernetes.io/os&quot;</span> instead</span><br><span class="line">deployment.apps/cattle<span class="literal">-cluster-agent</span> created</span><br></pre></td></tr></table></figure>
<p><a href="image-20220222124826542.png" title="image-20220222124826542" class="gallery-item" style="box-shadow: none;"> <img src="/2023/05/10/%E6%95%B0%E6%8D%AE%E5%BA%93/graphdatabase/k8s%E9%83%A8%E7%BD%B2nebulaGraph//image-20220222124826542.png" alt="image-20220222124826542"></a></p>
<p><a href="image-20220222124844668.png" title="image-20220222124844668" class="gallery-item" style="box-shadow: none;"> <img src="/2023/05/10/%E6%95%B0%E6%8D%AE%E5%BA%93/graphdatabase/k8s%E9%83%A8%E7%BD%B2nebulaGraph//image-20220222124844668.png" alt="image-20220222124844668"></a></p>
<ul>
<li>
<p>æŸ¥çœ‹podè¿è¡Œåœ¨é‚£ä¸ªèŠ‚ç‚¹</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹podid</span></span><br><span class="line">kubectl get pods <span class="literal">-o</span> wide</span><br><span class="line"><span class="comment">#è¿›å…¥pod</span></span><br><span class="line">kubectl exec <span class="literal">-it</span> containerid  <span class="literal">--</span> /bin/sh</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="åä¸€ï¼Œæ­å»ºnfsæœåŠ¡å™¨">åä¸€ï¼Œæ­å»ºnfsæœåŠ¡å™¨</h2>
<ul>
<li>
<pre><code class="language-powershell">[root@nfsserver ~]# mkdir -p /data/nfs
[root@nfsserver ~]# vim /etc/exports
/data/nfs       *(rw,no_root_squash,sync)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* æ‰€æœ‰èŠ‚ç‚¹ä¸­å®‰è£…nfså®¢æˆ·ç«¯</span><br><span class="line"></span><br><span class="line">  ```powershell</span><br><span class="line">  yum install nfs-utils -y</span><br></pre></td></tr></table></figure>



</code></pre>
</li>
<li>
<p>éªŒè¯æ˜¯å¦å¯ç”¨å†å·¥ä½œèŠ‚ç‚¹ä¸­</p>
</li>
</ul>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">showmount <span class="literal">-e</span> <span class="number">192.168</span>.<span class="number">222.143</span> <span class="comment">#nfsæœåŠ¡å™¨çš„åœ°å€</span></span><br></pre></td></tr></table></figure>
<h2 id="åäºŒ-ä½¿ç”¨NFSæ–‡ä»¶ç³»ç»Ÿåˆ›å»ºå­˜å‚¨åŠ¨æ€ä¾›ç»™-storageclasså®‰è£…">åäºŒ ä½¿ç”¨NFSæ–‡ä»¶ç³»ç»Ÿåˆ›å»ºå­˜å‚¨åŠ¨æ€ä¾›ç»™(storageclasså®‰è£…)</h2>
<p>PVå¯¹å­˜å‚¨ç³»ç»Ÿçš„æ”¯æŒå¯é€šè¿‡å…¶æ’ä»¶æ¥å®ç°ï¼Œç›®å‰ï¼ŒKubernetesæ”¯æŒå¦‚ä¸‹ç±»å‹çš„æ’ä»¶ã€‚</p>
<p>PVå¯¹å­˜å‚¨ç³»ç»Ÿçš„æ”¯æŒå¯é€šè¿‡å…¶æ’ä»¶æ¥å®ç°ï¼Œç›®å‰ï¼ŒKubernetesæ”¯æŒå¦‚ä¸‹ç±»å‹çš„æ’ä»¶ã€‚</p>
<p>å®˜æ–¹åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://kubernetes.io/docs/concepts/storage/storage-classes/">https://kubernetes.io/docs/concepts/storage/storage-classes/</a></p>
<p>å®˜æ–¹æ’ä»¶æ˜¯ä¸æ”¯æŒNFSåŠ¨æ€ä¾›ç»™çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨ç¬¬ä¸‰æ–¹çš„æ’ä»¶æ¥å®ç°</p>
<p>ç¬¬ä¸‰æ–¹æ’ä»¶åœ°å€: <a target="_blank" rel="noopener" href="https://github.com/kubernetes-retired/external-storage">https://github.com/kubernetes-retired/external-storage</a></p>
<h3 id="12-1ï¼Œä¸‹è½½å¹¶åˆ›å»ºstorageclass">12.1ï¼Œä¸‹è½½å¹¶åˆ›å»ºstorageclass</h3>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">k8s</span>-<span class="type">master1</span> ~]<span class="comment"># wget https://raw.githubusercontent.com/kubernetes-sigs/nfs-subdir-external-provisioner/master/deploy/class.yaml</span></span><br><span class="line"></span><br><span class="line">[<span class="type">root</span>@<span class="type">k8s</span>-<span class="type">master1</span> ~]<span class="comment"># mv class.yaml storageclass-nfs.yml</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">k8s</span>-<span class="type">master1</span> ~]<span class="comment"># cat storageclass-nfs.yml</span></span><br><span class="line">apiVersion: storage.k8s.io/v1</span><br><span class="line">kind: StorageClass				<span class="comment"># ç±»å‹</span></span><br><span class="line">metadata:</span><br><span class="line">  name: nfs<span class="literal">-client</span>		<span class="comment"># åç§°,è¦ä½¿ç”¨å°±éœ€è¦è°ƒç”¨æ­¤åç§°</span></span><br><span class="line">provisioner: k8s<span class="literal">-sigs</span>.io/nfs<span class="literal">-subdir-external-provisioner</span> 	<span class="comment"># åŠ¨æ€ä¾›ç»™æ’ä»¶</span></span><br><span class="line">parameters:</span><br><span class="line">  archiveOnDelete: <span class="string">&quot;false&quot;</span>		<span class="comment"># åˆ é™¤æ•°æ®æ—¶æ˜¯å¦å­˜æ¡£ï¼Œfalseè¡¨ç¤ºä¸å­˜æ¡£ï¼Œtrueè¡¨ç¤ºå­˜æ¡£</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">k8s</span>-<span class="type">master1</span> ~]<span class="comment"># kubectl apply -f storageclass-nfs.yml</span></span><br><span class="line">storageclass.storage.k8s.io/managed<span class="literal">-nfs-storage</span> created</span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">k8s</span>-<span class="type">master1</span> ~]<span class="comment"># kubectl get storageclass</span></span><br><span class="line">NAME         PROVISIONER                                   RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE</span><br><span class="line">nfs<span class="literal">-client</span>   k8s<span class="literal">-sigs</span>.io/nfs<span class="literal">-subdir-external-provisioner</span>   Delete          Immediate           false                  <span class="number">10</span>s</span><br><span class="line"></span><br><span class="line"><span class="comment"># RECLAIMPOLICY pvå›æ”¶ç­–ç•¥ï¼Œpodæˆ–pvcè¢«åˆ é™¤åï¼Œpvæ˜¯å¦åˆ é™¤è¿˜æ˜¯ä¿ç•™ã€‚</span></span><br><span class="line"><span class="comment"># VOLUMEBINDINGMODE Immediate æ¨¡å¼ä¸‹PVCä¸PVç«‹å³ç»‘å®šï¼Œä¸»è¦æ˜¯ä¸ç­‰å¾…ç›¸å…³Podè°ƒåº¦å®Œæˆï¼Œä¸å…³å¿ƒå…¶è¿è¡ŒèŠ‚ç‚¹ï¼Œç›´æ¥å®Œæˆç»‘å®šã€‚ç›¸åçš„ WaitForFirstConsumeræ¨¡å¼ä¸‹éœ€è¦ç­‰å¾…Podè°ƒåº¦å®Œæˆåè¿›è¡ŒPVç»‘å®šã€‚</span></span><br><span class="line"><span class="comment"># ALLOWVOLUMEEXPANSION pvcæ‰©å®¹</span></span><br></pre></td></tr></table></figure>
<h3 id="12-2ï¼Œä¸‹è½½å¹¶åˆ›å»ºrbac">12.2ï¼Œä¸‹è½½å¹¶åˆ›å»ºrbac</h3>
<p>å› ä¸ºstorageè‡ªåŠ¨åˆ›å»ºpvéœ€è¦ç»è¿‡kube-apiserverï¼Œæ‰€ä»¥éœ€è¦æˆæƒã€‚</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">k8s</span>-<span class="type">master1</span> ~]<span class="comment"># wget https://raw.githubusercontent.com/kubernetes-sigs/nfs-subdir-external-provisioner/master/deploy/rbac.yaml</span></span><br><span class="line"></span><br><span class="line">[<span class="type">root</span>@<span class="type">k8s</span>-<span class="type">master1</span> ~]<span class="comment"># mv rbac.yaml storageclass-nfs-rbac.yaml</span></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">k8s</span>-<span class="type">master1</span> ~]<span class="comment"># cat storageclass-nfs-rbac.yaml</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: ServiceAccount</span><br><span class="line">metadata:</span><br><span class="line">  name: nfs<span class="literal">-client-provisioner</span></span><br><span class="line">  <span class="comment"># replace with namespace where provisioner is deployed</span></span><br><span class="line">  namespace: default</span><br><span class="line"><span class="literal">---</span></span><br><span class="line">kind: ClusterRole</span><br><span class="line">apiVersion: rbac.authorization.k8s.io/v1</span><br><span class="line">metadata:</span><br><span class="line">  name: nfs<span class="literal">-client-provisioner-runner</span></span><br><span class="line">rules:</span><br><span class="line">  - apiGroups: [<span class="string">&quot;&quot;</span>]</span><br><span class="line">    resources: [<span class="string">&quot;persistentvolumes&quot;</span>]</span><br><span class="line">    verbs: [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;list&quot;</span>, <span class="string">&quot;watch&quot;</span>, <span class="string">&quot;create&quot;</span>, <span class="string">&quot;delete&quot;</span>]</span><br><span class="line">  - apiGroups: [<span class="string">&quot;&quot;</span>]</span><br><span class="line">    resources: [<span class="string">&quot;persistentvolumeclaims&quot;</span>]</span><br><span class="line">    verbs: [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;list&quot;</span>, <span class="string">&quot;watch&quot;</span>, <span class="string">&quot;update&quot;</span>]</span><br><span class="line">  - apiGroups: [<span class="string">&quot;storage.k8s.io&quot;</span>]</span><br><span class="line">    resources: [<span class="string">&quot;storageclasses&quot;</span>]</span><br><span class="line">    verbs: [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;list&quot;</span>, <span class="string">&quot;watch&quot;</span>]</span><br><span class="line">  - apiGroups: [<span class="string">&quot;&quot;</span>]</span><br><span class="line">    resources: [<span class="string">&quot;events&quot;</span>]</span><br><span class="line">    verbs: [<span class="string">&quot;create&quot;</span>, <span class="string">&quot;update&quot;</span>, <span class="string">&quot;patch&quot;</span>]</span><br><span class="line"><span class="literal">---</span></span><br><span class="line">kind: ClusterRoleBinding</span><br><span class="line">apiVersion: rbac.authorization.k8s.io/v1</span><br><span class="line">metadata:</span><br><span class="line">  name: run<span class="literal">-nfs-client-provisioner</span></span><br><span class="line">subjects:</span><br><span class="line">  - kind: ServiceAccount</span><br><span class="line">    name: nfs<span class="literal">-client-provisioner</span></span><br><span class="line">    <span class="comment"># replace with namespace where provisioner is deployed</span></span><br><span class="line">    namespace: default</span><br><span class="line">roleRef:</span><br><span class="line">  kind: ClusterRole</span><br><span class="line">  name: nfs<span class="literal">-client-provisioner-runner</span></span><br><span class="line">  apiGroup: rbac.authorization.k8s.io</span><br><span class="line"><span class="literal">---</span></span><br><span class="line">kind: Role</span><br><span class="line">apiVersion: rbac.authorization.k8s.io/v1</span><br><span class="line">metadata:</span><br><span class="line">  name: leader<span class="literal">-locking-nfs-client-provisioner</span></span><br><span class="line">  <span class="comment"># replace with namespace where provisioner is deployed</span></span><br><span class="line">  namespace: default</span><br><span class="line">rules:</span><br><span class="line">  - apiGroups: [<span class="string">&quot;&quot;</span>]</span><br><span class="line">    resources: [<span class="string">&quot;endpoints&quot;</span>]</span><br><span class="line">    verbs: [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;list&quot;</span>, <span class="string">&quot;watch&quot;</span>, <span class="string">&quot;create&quot;</span>, <span class="string">&quot;update&quot;</span>, <span class="string">&quot;patch&quot;</span>]</span><br><span class="line"><span class="literal">---</span></span><br><span class="line">kind: RoleBinding</span><br><span class="line">apiVersion: rbac.authorization.k8s.io/v1</span><br><span class="line">metadata:</span><br><span class="line">  name: leader<span class="literal">-locking-nfs-client-provisioner</span></span><br><span class="line">  <span class="comment"># replace with namespace where provisioner is deployed</span></span><br><span class="line">  namespace: default</span><br><span class="line">subjects:</span><br><span class="line">  - kind: ServiceAccount</span><br><span class="line">    name: nfs<span class="literal">-client-provisioner</span></span><br><span class="line">    <span class="comment"># replace with namespace where provisioner is deployed</span></span><br><span class="line">    namespace: default</span><br><span class="line">roleRef:</span><br><span class="line">  kind: Role</span><br><span class="line">  name: leader<span class="literal">-locking-nfs-client-provisioner</span></span><br><span class="line">  apiGroup: rbac.authorization.k8s.io</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">k8s</span>-<span class="type">master1</span> ~]<span class="comment"># kubectl apply -f rbac.yaml</span></span><br><span class="line">serviceaccount/nfs<span class="literal">-client-provisioner</span> created</span><br><span class="line">clusterrole.rbac.authorization.k8s.io/nfs<span class="literal">-client-provisioner-runner</span> created</span><br><span class="line">clusterrolebinding.rbac.authorization.k8s.io/run<span class="literal">-nfs-client-provisioner</span> created</span><br><span class="line">role.rbac.authorization.k8s.io/leader<span class="literal">-locking-nfs-client-provisioner</span> created</span><br><span class="line">rolebinding.rbac.authorization.k8s.io/leader<span class="literal">-locking-nfs-client-provisioner</span> created</span><br></pre></td></tr></table></figure>
<h3 id="12-3ï¼Œåˆ›å»ºåŠ¨æ€ä¾›ç»™çš„deployment">12.3ï¼Œåˆ›å»ºåŠ¨æ€ä¾›ç»™çš„deployment</h3>
<p>éœ€è¦ä¸€ä¸ªdeploymentæ¥ä¸“é—¨å®ç°pvä¸pvcçš„è‡ªåŠ¨åˆ›å»º</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">k8s</span>-<span class="type">master1</span> ~]<span class="comment"># vim deploy-nfs-client-provisioner.yml</span></span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: nfs<span class="literal">-client-provisioner</span></span><br><span class="line">spec:</span><br><span class="line">  replicas: <span class="number">1</span></span><br><span class="line">  strategy:</span><br><span class="line">    <span class="built_in">type</span>: Recreate</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: nfs<span class="literal">-client-provisioner</span></span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: nfs<span class="literal">-client-provisioner</span></span><br><span class="line">    spec:</span><br><span class="line">      serviceAccount: nfs<span class="literal">-client-provisioner</span></span><br><span class="line">      containers:</span><br><span class="line">        - name: nfs<span class="literal">-client-provisioner</span></span><br><span class="line">          image: registry.cn<span class="literal">-beijing</span>.aliyuncs.com/pylixm/nfs<span class="literal">-subdir-external-provisioner</span>:v4.<span class="number">0.0</span></span><br><span class="line">          volumeMounts:</span><br><span class="line">            - name: nfs<span class="literal">-client-root</span></span><br><span class="line">              mountPath: /persistentvolumes</span><br><span class="line">          env:</span><br><span class="line">            - name: PROVISIONER_NAME</span><br><span class="line">              value: k8s<span class="literal">-sigs</span>.io/nfs<span class="literal">-subdir-external-provisioner</span></span><br><span class="line">            - name: NFS_SERVER</span><br><span class="line">              value: <span class="number">192.168</span>.<span class="number">10.129</span></span><br><span class="line">            - name: NFS_PATH</span><br><span class="line">              value: /<span class="keyword">data</span>/nfs</span><br><span class="line">      volumes:</span><br><span class="line">        - name: nfs<span class="literal">-client-root</span></span><br><span class="line">          nfs:</span><br><span class="line">            server: <span class="number">192.168</span>.<span class="number">10.129</span></span><br><span class="line">            path: /<span class="keyword">data</span>/nfs</span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">k8s</span>-<span class="type">master1</span> ~]<span class="comment"># kubectl apply -f deploy-nfs-client-provisioner.yml</span></span><br><span class="line">deployment.apps/nfs<span class="literal">-client-provisioner</span> created</span><br></pre></td></tr></table></figure>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">k8s</span>-<span class="type">master1</span> ~]<span class="comment"># kubectl get pods |grep nfs-client-provisioner</span></span><br><span class="line">nfs<span class="literal">-client-provisioner-5b5ddcd6c8-b6zbq</span>   <span class="number">1</span>/<span class="number">1</span>     Running   <span class="number">0</span>          <span class="number">34</span>s</span><br></pre></td></tr></table></figure>
<h2 id="åä¸‰ï¼ŒnebulaGraph-operator-å®‰è£…éƒ¨ç½²">åä¸‰ï¼ŒnebulaGraph operator å®‰è£…éƒ¨ç½²</h2>
<ul>
<li>
<p>å‚è€ƒå®˜ç½‘  å®‰è£… NebulaGraph Operator å‰ï¼Œç”¨æˆ·éœ€è¦å®‰è£…ä»¥ä¸‹è½¯ä»¶å¹¶ç¡®ä¿å®‰è£…ç‰ˆæœ¬çš„æ­£ç¡®æ€§ï¼ˆNebulaGraph Operator ä¸è´Ÿè´£å¤„ç†å®‰è£…è¿™äº›è½¯ä»¶è¿‡ç¨‹ä¸­å‡ºç°çš„é—®é¢˜ï¼‰ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:left">è½¯ä»¶</th>
<th style="text-align:left">ç‰ˆæœ¬è¦æ±‚</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://kubernetes.io/">Kubernetes</a></td>
<td style="text-align:left">&gt;= 1.16</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://helm.sh/">Helm</a></td>
<td style="text-align:left">&gt;= 3.2.0</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://github.com/coredns/coredns">CoreDNS</a></td>
<td style="text-align:left">&gt;= 1.6.0</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Helmå®‰è£…</p>
 <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">a</span> ~]<span class="comment"># curl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 | bash</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line"><span class="number">100</span> <span class="number">11345</span>  <span class="number">100</span> <span class="number">11345</span>    <span class="number">0</span>     <span class="number">0</span>  <span class="number">18830</span>      <span class="number">0</span> <span class="literal">--</span>:<span class="literal">--</span>:<span class="literal">--</span> <span class="literal">--</span>:<span class="literal">--</span>:<span class="literal">--</span> <span class="literal">--</span>:<span class="literal">--</span>:<span class="literal">--</span> <span class="number">18845</span></span><br><span class="line">[<span class="type">WARNING</span>] Could not find git. It is required <span class="keyword">for</span> plugin installation.</span><br><span class="line">Downloading https://get.helm.sh/helm<span class="literal">-v3</span>.<span class="number">12.1</span><span class="literal">-linux-amd64</span>.tar.gz</span><br><span class="line">Verifying checksum... Done.</span><br><span class="line">Preparing to install helm into /usr/local/bin</span><br><span class="line">helm installed into /usr/local/bin/helm</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>coreDNSå®‰è£…å¯ä»¥ç½‘ä¸ŠæŸ¥é˜…èµ„æ–™(ä¸Šé¢rkeå®‰è£…è¿‡ç¨‹ä¸­å·²ç»å®‰è£…äº†coredns)</p>
</li>
<li>
<p>å®‰è£… NebulaGraph Operator</p>
</li>
</ul>
<ol>
<li>
<p>æ·»åŠ  NebulaGraph Operator Helm ä»“åº“ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm repo add nebula-operator https://vesoft-inc.github.io/nebula-operator/charts</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ‹‰å–æœ€æ–°çš„ Operator Helm ä»“åº“ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm repo update</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒ <a target="_blank" rel="noopener" href="https://helm.sh/docs/helm/helm_repo/">Helm ä»“åº“</a>è·å–æ›´å¤š<code>helm repo</code>ç›¸å…³ä¿¡æ¯ã€‚</p>
</li>
<li>
<p>åˆ›å»ºå‘½åç©ºé—´ç”¨äºå®‰è£… NebulaGraph Operatorã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create namespace &lt;namespace_name&gt;</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼Œåˆ›å»ºoperatorå‘½åç©ºé—´ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create namespace operator</span><br></pre></td></tr></table></figure>
<ul>
<li>nebula-operator chart ä¸­çš„æ‰€æœ‰èµ„æºéƒ½ä¼šå®‰è£…åœ¨è¯¥å‘½åç©ºé—´ä¸‹ã€‚</li>
<li>ç”¨æˆ·ä¹Ÿå¯åˆ›å»ºå…¶ä»–å‘½åç©ºé—´ã€‚</li>
</ul>
</li>
<li>
<p>å®‰è£… NebulaGraph Operatorã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm install nebula-operator nebula-operator/nebula-operator --namespace=&lt;namespace_name&gt; --version=$&#123;chart_version&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ç›®å‰1.5.0æ— æ³•å®‰è£… å¯ä»¥ä¸æŒ‡å®šç‰ˆæœ¬ é»˜è®¤å®‰è£…æœ€æ–°ç‰ˆæœ¬,ç”±äºgcr.ioæ— æ³•ä¸‹è½½é•œåƒä½¿ç”¨kubesphere/kube-rbac-proxy:v0.8.0ä»£æ›¿</span><br><span class="line"></span><br><span class="line">helm install nebula-operator nebula-operator/nebula-operator --namespace=nebula-operator-system --set image.kubeRBACProxy.image=kubesphere/kube-rbac-proxy:v0.8.0</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>
<h3 id="å¸è½½-NebulaGraph-Operator">å¸è½½ NebulaGraph Operator</h3>
<ol>
<li>
<p>å¸è½½ NebulaGraph Operator chartã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm uninstall nebula-operator --namespace=operator</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åˆ é™¤ CRDã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl delete crd nebulaclusters.apps.nebula-graph.io</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<h2 id="åå››ï¼Œéƒ¨ç½²nebulaGraphï¼ˆkubectlï¼‰">åå››ï¼Œéƒ¨ç½²nebulaGraphï¼ˆkubectlï¼‰</h2>
<ul>
<li>åˆ›å»ºé›†ç¾¤é…ç½®æ–‡ä»¶ã€‚</li>
</ul>
<p>â€‹       åˆ›å»ºåä¸º<code>apps_v1alpha1_nebulacluster.yaml</code>çš„æ–‡ä»¶ã€‚å®˜ç½‘æä¾›äº†æ¨¡æ¿å¯ä»¥ç›´æ¥ä¸‹è½½</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: apps.nebula<span class="literal">-graph</span>.io/v1alpha1</span><br><span class="line">kind: NebulaCluster</span><br><span class="line">metadata:</span><br><span class="line">  name: nebula</span><br><span class="line">spec:</span><br><span class="line">  graphd:</span><br><span class="line">    resources:</span><br><span class="line">      requests:</span><br><span class="line">        cpu: <span class="string">&quot;500m&quot;</span></span><br><span class="line">        memory: <span class="string">&quot;500Mi&quot;</span></span><br><span class="line">      limits:</span><br><span class="line">        cpu: <span class="string">&quot;1&quot;</span></span><br><span class="line">        memory: <span class="string">&quot;1Gi&quot;</span></span><br><span class="line">    replicas: <span class="number">1</span></span><br><span class="line">    image: vesoft/nebula<span class="literal">-graphd</span></span><br><span class="line">    version: v3.<span class="number">5.0</span></span><br><span class="line">    service:</span><br><span class="line">      <span class="built_in">type</span>: NodePort</span><br><span class="line">      externalTrafficPolicy: Local</span><br><span class="line">    logVolumeClaim:</span><br><span class="line">      resources:</span><br><span class="line">        requests:</span><br><span class="line">          storage: <span class="number">1</span><span class="built_in">Gi</span></span><br><span class="line">      storageClassName: managed<span class="literal">-nfs-storage</span></span><br><span class="line">  metad:</span><br><span class="line"><span class="comment">#    license:</span></span><br><span class="line"><span class="comment">#      secretName: &quot;nebula-license&quot;</span></span><br><span class="line"><span class="comment">#      licenseKey: &quot;nebula.license&quot;</span></span><br><span class="line">    resources:</span><br><span class="line">      requests:</span><br><span class="line">        cpu: <span class="string">&quot;500m&quot;</span></span><br><span class="line">        memory: <span class="string">&quot;500Mi&quot;</span></span><br><span class="line">      limits:</span><br><span class="line">        cpu: <span class="string">&quot;1&quot;</span></span><br><span class="line">        memory: <span class="string">&quot;1Gi&quot;</span></span><br><span class="line">    replicas: <span class="number">1</span></span><br><span class="line">    image: vesoft/nebula<span class="literal">-metad</span></span><br><span class="line">    version: v3.<span class="number">5.0</span></span><br><span class="line">    dataVolumeClaim:</span><br><span class="line">      resources:</span><br><span class="line">        requests:</span><br><span class="line">          storage: <span class="number">5</span><span class="built_in">Gi</span></span><br><span class="line">      storageClassName:  managed<span class="literal">-nfs-storage</span></span><br><span class="line">    logVolumeClaim:</span><br><span class="line">      resources:</span><br><span class="line">        requests:</span><br><span class="line">          storage: <span class="number">1</span><span class="built_in">Gi</span></span><br><span class="line">      storageClassName:  managed<span class="literal">-nfs-storage</span></span><br><span class="line">  storaged:</span><br><span class="line">    resources:</span><br><span class="line">      requests:</span><br><span class="line">        cpu: <span class="string">&quot;500m&quot;</span></span><br><span class="line">        memory: <span class="string">&quot;500Mi&quot;</span></span><br><span class="line">      limits:</span><br><span class="line">        cpu: <span class="string">&quot;1&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šæ‰€æœ‰çš„storageClassNameéœ€è¦å’Œä¸Šé¢å®‰è£…storageclassæ—¶åç§°ç›¸åŒã€‚ å³ storageclass-nfs.ymlä¸­çš„ <a target="_blank" rel="noopener" href="http://metadata.name">metadata.name</a>: nfs-client</p>
</blockquote>
<ul>
<li>
<p>æŸ¥çœ‹çŠ¶æ€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nebula-exporter-66457984-w6zpn            1/1     Running   0          31m</span><br><span class="line">nebula-graphd-0                           2/2     Running   0          31m</span><br><span class="line">nebula-metad-0                            2/2     Running   0          35m</span><br><span class="line">nebula-storaged-0                         2/2     Running   0          35m</span><br><span class="line">nebula-storaged-1                         0/2     Pending   0          35m</span><br><span class="line">nebula-storaged-2                         0/2     Pending   0          35m</span><br><span class="line">nfs-client-provisioner-6bd7f48698-m4v94   1/1     Running   0          57m</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="åäº”ï¼Œè¿æ¥nebula">åäº”ï¼Œè¿æ¥nebula</h2>
<ul>
<li>
<p>æŒ‰ç…§å®˜ç½‘æä¾›çš„æ¨¡æ¿ä¿®æ”¹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    # modify the cluster name</span><br><span class="line">    app.kubernetes.io/cluster: &quot;nebula&quot;</span><br><span class="line">    app.kubernetes.io/component: graphd</span><br><span class="line">    app.kubernetes.io/managed-by: nebula-operator</span><br><span class="line">    app.kubernetes.io/name: nebula-graph</span><br><span class="line">  name: nebula-graphd-nodeport-svc</span><br><span class="line">  namespace: default</span><br><span class="line">spec:</span><br><span class="line">  externalTrafficPolicy: Cluster #æ”¹ä¸ºlocalï¼Œæ— æ³•è¿æ¥åˆ°æ•°æ®åº“ï¼Œè¿™é‡Œæ”¹ä¸ºCluster</span><br><span class="line">  ports:</span><br><span class="line">  - name: thrift</span><br><span class="line">    port: 9669</span><br><span class="line">    protocol: TCP</span><br><span class="line">    targetPort: 9669</span><br><span class="line">  - name: http</span><br><span class="line">    port: 19669</span><br><span class="line">    protocol: TCP</span><br><span class="line">    targetPort: 19669</span><br><span class="line">  selector:</span><br><span class="line">    # modify the cluster name</span><br><span class="line">    app.kubernetes.io/cluster: &quot;nebula&quot;</span><br><span class="line">    app.kubernetes.io/component: graphd</span><br><span class="line">    app.kubernetes.io/managed-by: nebula-operator</span><br><span class="line">    app.kubernetes.io/name: nebula-graph</span><br><span class="line">  type: NodePort</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä½¿ Service æœåŠ¡åœ¨é›†ç¾¤ä¸­ç”Ÿæ•ˆã€‚</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create -f graphd-nodeport-service.yaml</span><br></pre></td></tr></table></figure>
<ul>
<li>æŸ¥çœ‹ Service ä¸­NebulaGraphæ˜ å°„è‡³é›†ç¾¤èŠ‚ç‚¹çš„ç«¯å£ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get services -l app.kubernetes.io/cluster=&lt;nebula&gt;  #&lt;nebula&gt;ä¸ºå˜é‡å€¼ï¼Œè¯·ç”¨å®é™…é›†ç¾¤åç§°æ›¿æ¢ã€‚</span><br></pre></td></tr></table></figure>
<ul>
<li>è¿”å›ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NAME                           TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)                                          AGE</span><br><span class="line">nebula-graphd-svc-nodeport     NodePort    10.107.153.129 &lt;none&gt;        9669:32236/TCP,19669:31674/TCP,19670:31057/TCP   24h</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p><code>NodePort</code>ç±»å‹çš„ Service ä¸­ï¼Œæ˜ å°„è‡³é›†ç¾¤èŠ‚ç‚¹çš„ç«¯å£ä¸º<code>32236</code>ã€‚</p>
<ol>
<li>
<p>ä½¿ç”¨èŠ‚ç‚¹ IP å’Œä¸Šè¿°æ˜ å°„çš„èŠ‚ç‚¹ç«¯å£è¿æ¥ NebulaGraphã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart=Never -- &lt;nebula_console_name&gt; -addr &lt;node_ip&gt; -port &lt;node_port&gt; -u &lt;username&gt; -p &lt;password&gt;</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubectl run -ti --image vesoft/nebula-console:v3.5.0 --restart=Never -- nebula-console -addr 192.168.8.24 -port 32236 -u root -p vesoft</span><br><span class="line">If you don&#x27;t see a command prompt, try pressing enter.</span><br><span class="line"></span><br><span class="line">(root@nebula) [(none)]&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>--image</code>ï¼šä¸ºè¿æ¥NebulaGraphçš„å·¥å…· NebulaGraph Console çš„é•œåƒã€‚</li>
<li><code>&lt;nebula-console&gt;</code>ï¼šè‡ªå®šä¹‰çš„ Pod åç§°ã€‚æœ¬ç¤ºä¾‹ä¸º<code>nebula-console</code>ã€‚</li>
<li><code>-addr</code>ï¼šNebulaGraphé›†ç¾¤ä¸­ä»»ä¸€èŠ‚ç‚¹ IP åœ°å€ã€‚æœ¬ç¤ºä¾‹ä¸º<code>192.168.8.24</code>ã€‚</li>
<li><code>-port</code>ï¼šNebulaGraphæ˜ å°„è‡³èŠ‚ç‚¹çš„ç«¯å£ã€‚æœ¬ç¤ºä¾‹ä¸º<code>32236</code>ã€‚</li>
<li><code>-u</code>ï¼šNebulaGraphè´¦å·çš„ç”¨æˆ·åã€‚æœªå¯ç”¨èº«ä»½è®¤è¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„å·²å­˜åœ¨çš„ç”¨æˆ·åï¼ˆé»˜è®¤ä¸º rootï¼‰ã€‚</li>
<li><code>-p</code>ï¼šç”¨æˆ·åå¯¹åº”çš„å¯†ç ã€‚æœªå¯ç”¨èº«ä»½è®¤è¯æ—¶ï¼Œå¯†ç å¯ä»¥å¡«å†™ä»»æ„å­—ç¬¦ã€‚</li>
</ul>
</li>
</ol>
</div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2023-05-10</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« albert dong</span>
            
            
             
                <span>å½’ä¸ºåˆ†ç±»:
                    
                    
                        <a href='../../../../../../categories/%E6%95%B0%E6%8D%AE%E5%BA%93/'>
                            æ•°æ®åº“
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                
                    <span>ä¸Šä¸€ç¯‡ï¼š<a href='../%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93nebulaGraph%E9%80%89%E5%9E%8B/'>å›¾æ•°æ®åº“nebulaGraphé€‰å‹</a></span>
                

                
                    <span class="post-footer-pre-next-last-span-right">ä¸‹ä¸€ç¯‡ï¼š<a href="../../mysql/mysql%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/">mysqlæ‰§è¡Œè®¡åˆ’</a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
            Â© 1949-2024 China 

            
                

            
        </span>
       
    
</div>



<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>ğŸŒŠçœ‹è¿‡å¤§æµ·çš„äººä¸ä¼šå¿˜è®°æµ·çš„å¹¿é˜”ğŸŒŠ</span>
            
                <span class="footer-last-span-right"><i>æœ¬ç«™ç”±<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>é©±åŠ¨ï½œä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>ä¸»é¢˜</i></span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--ç›®å½•-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="../../../../../../js/toc.js"></script>

    

    
<script src="../../../../../../js/randomHeaderContent.js"></script>

    <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
    
        
<script src="../../../../../../js/returnToTop.js"></script>

    

    
        
<script src="../../../../../../js/returnToLastPage.js"></script>

    





<script src="../../../../../../js/lightgallery/lightgallery.umd.min.js"></script>



<script src="../../../../../../js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="../../../../../../js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="../../../../../../js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="../../../../../../js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="../../../../../../js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="../../../../../../js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // å¯ç”¨æ’ä»¶
            thumbnail: true,          // æ˜¾ç¤ºç¼©ç•¥å›¾
            zoom: true,               // å¯ç”¨ç¼©æ”¾åŠŸ
            rotate: true,             // å¯ç”¨æ—‹è½¬åŠŸèƒ½èƒ½
            autoplay: true,        // å¯ç”¨è‡ªåŠ¨æ’­æ”¾åŠŸèƒ½
            fullScreen: true,      // å¯ç”¨å…¨å±åŠŸèƒ½
            pager: false, //é¡µç ,
            zoomFromOrigin: true,   // ä»åŸå§‹ä½ç½®ç¼©æ”¾
            actualSize: true,       // å¯ç”¨æŸ¥çœ‹å®é™…å¤§å°çš„åŠŸèƒ½
            enableZoomAfter: 300,    // å»¶è¿Ÿç¼©æ”¾ï¼Œç¡®ä¿å›¾ç‰‡åŠ è½½å®Œæˆåå¯ç¼©æ”¾
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // ä¿®å¤é€‰æ‹©å™¨
    }
    
</script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 

                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- è¿”å›çš„æŒ‰é’®-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>